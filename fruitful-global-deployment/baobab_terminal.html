<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal.faa.zone - Your Central Access Hub</title>
    <link rel="icon" href="/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Base Styles - Apple inspired cleanliness + Baobab Corporate */
        :root {
            /* Fruitful/Apple-inspired colors (Light Mode Defaults) */
            --text-color-light: #1d1d1f;
            --text-color-dark: #f5f5f7; /* Used for text on dark backgrounds */
            --bg-color-light: #ffffff; /* Pure white */
            --bg-color-dark: #1a1a1c; /* Deep black/dark grey */
            --card-bg-light: #ffffff; /* Pure white */
            --card-bg-dark: #2a2a2e; /* Darker grey for card backgrounds */
            --border-color-light: #e8e8ed;
            --border-color-dark: #3a3a3e; /* Subtle dark border */
            --primary-color: #0071e3; /* Apple Blue */
            --secondary-color: #30d158; /* Apple Green */
            --tertiary-color: #ff3b30; /* Vibrant Red */
            --muted-text-light: #6e6e73;
            --muted-text-dark: #a0a0a5;

            /* Baobab specific colors (calm neutral harmony, corporate) */
            --baobab-primary-dark: #1A1A1A; /* Deep Black for Baobab elements */
            --baobab-secondary-dark: #222222; /* Slightly lighter dark for hero */
            --baobab-light-text: #EAEAEA; /* Light text on Baobab dark background */
            --baobab-gold: #B8860B; /* DarkGoldenrod - corporate gold */
            --baobab-muted-gray: #4A4A4A; /* Darker gray for Baobab body text */
            --baobab-border-gray: #4A4A4A;
            --baobab-light-bg: #F8F8F8; /* Very light gray/off-white */
            --baobab-slate-light: #f1f5f9; /* slate-100 from Baobab dashboard */
            --baobab-slate-medium: #e2e8f0; /* slate-200 */
            --baobab-slate-dark: #475569; /* slate-600 */
            --baobab-slate-text-dark: #64748b; /* slate-500 for chart labels */
        }

        /* Dark Mode Overrides - Inspired by 1000-year-old Baobab (Earthy, deep tones) */
        body.dark-mode {
            --text-color-light: #f5f5f7; /* White text on dark backgrounds */
            --text-color-dark: #1d1d1f; /* Dark text on light backgrounds (not used much in dark mode) */
            --bg-color-light: #252525; /* Deep charcoal for main background */
            --bg-color-dark: #141414; /* Even darker, almost black for deepest sections */
            --card-bg-light: #333333; /* Darker grey for card backgrounds */
            --card-bg-dark: #1f1f1f; /* Near black for very dark cards */
            --border-color-light: #444444; /* Darker, subtle border */
            --border-color-dark: #555555; /* Slightly lighter border */
            --primary-color: #81b214; /* Muted green for primary action (Baobab leaves) */
            --secondary-color: #fca311; /* Warm orange/gold (Baobab bark/fruit) */
            --tertiary-color: #d62828; /* Slightly muted red */
            --muted-text-light: #aaaaaa; /* Lighter muted text */
            --muted-text-dark: #cccccc; /* Even lighter muted text */

            --baobab-primary-dark: #141414; /* Pure black for Baobab sections */
            --baobab-secondary-dark: #1a1a1a;
            --baobab-light-text: #EAEAEA;
            --baobab-gold: #D4AF37; /* Brighter gold in dark mode */
            --baobab-muted-gray: #666666;
            --baobab-border-gray: #555555;
            --baobab-slate-light: #2c2c2c; /* Darker slate for dashboard */
            --baobab-slate-medium: #3a3a3a;
            --baobab-slate-dark: #999999;
            --baobab-slate-text-dark: #bbbbbb;

            /* Override chart colors for dark mode */
            .chart-options-default canvas {
                background-color: var(--card-bg-dark); /* Ensure charts have a dark background */
            }
            .chart-options-default {
                background-color: var(--card-bg-dark);
                border-color: var(--border-color-dark);
            }
            .dashboard-metric-card, .tech-pillar, .explorer-brand-card, .ledger-metric-card, .sovereign-scrolls-info {
                background-color: var(--card-bg-light);
                border-color: var(--border-color-dark);
            }
        }


        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color-light); /* Pure white background by default */
            color: var(--text-color-light);
            line-height: 1.4;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.5s ease, color 0.5s ease; /* Slower, organic transition */
            scroll-behavior: smooth; /* Smooth scrolling for anchor links */
        }

        /* Custom Scrollbar Styling (Apple-like subtle) */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--border-color-light); /* Light track */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--muted-text-light); /* Muted gray thumb */
            border-radius: 10px;
            transition: background 0.3s ease;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #808085; /* Darker on hover */
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }


        /* Announcement Bar */
        #announcement-bar {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            text-align: center;
            font-size: 0.9rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 60; /* Higher than header */
            transition: all 0.3s ease-out;
            transform-origin: top; /* For scaling effect */
        }
        #announcement-bar.hidden {
            opacity: 0;
            height: 0;
            overflow: hidden;
            padding-top: 0;
            padding-bottom: 0;
            transform: scaleY(0); /* Collapse effect */
        }
        #announcement-bar a {
            color: white;
            font-weight: 600;
            text-decoration: underline;
            transition: opacity 0.2s ease;
        }
        #announcement-bar a:hover {
            opacity: 0.8;
        }
        #announcement-bar .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            position: absolute;
            right: 15px;
            padding: 5px;
            transition: transform 0.2s ease;
        }
        #announcement-bar .close-btn:hover {
            transform: scale(1.1);
        }

        /* Header - Minimalist and clean */
        header.main-header { /* Renamed to main-header */
            background-color: var(--bg-color-light); /* Solid white, no backdrop-filter */
            border-bottom: 1px solid var(--border-color-light);
            padding-top: 1rem;
            padding-bottom: 1rem;
            box-shadow: 0 1px 0 rgba(0,0,0,0.05);
            position: sticky;
            top: 0; /* Adjusted by JS based on announcement bar */
            z-index: 50;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px; /* Base padding */
            transition: top 0.3s ease, background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode header.main-header {
            background-color: var(--card-bg-dark);
            border-bottom-color: var(--border-color-dark);
            box-shadow: 0 1px 0 rgba(0,0,0,0.2);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .logo-group {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-color-light);
            transition: color 0.3s ease;
            flex-shrink: 0; /* Prevent shrinking */
        }
        body.dark-mode .logo-group {
            color: var(--text-color-light);
        }
        .logo-group .logo-link {
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .logo-fruitful {
            color: var(--primary-color);
            font-size: 1.6rem;
            font-weight: 800;
        }
        .logo-separator {
            color: var(--muted-text-light);
            font-size: 1.4rem;
            font-weight: 600;
        }
        body.dark-mode .logo-separator {
            color: var(--muted-text-light);
        }
        .logo-omnigrid {
            color: var(--text-color-light);
            font-size: 1.4rem;
            font-weight: 600;
        }
        body.dark-mode .logo-omnigrid {
            color: var(--text-color-light);
        }

        .main-nav {
            display: flex;
            align-items: center;
            gap: 20px; /* Space between nav list and actions */
            flex-grow: 1; /* Allow nav to take available space */
            justify-content: flex-end; /* Push nav content to right */
        }

        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            gap: 5px; /* Tighter gap for more items */
        }

        .nav-list a {
            text-decoration: none;
            color: var(--muted-text-light);
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s ease, background-color 0.3s ease;
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .nav-list a:hover {
            color: var(--primary-color);
            background-color: rgba(0, 0, 0, 0.03);
        }
        body.dark-mode .nav-list a {
            color: var(--muted-text-light);
        }
        body.dark-mode .nav-list a:hover {
            color: var(--primary-color);
            background-color: rgba(255,255,255,0.05);
        }

        /* Active Nav Link */
        .nav-list a.active-nav-link {
            color: var(--primary-color);
            font-weight: 600;
            background-color: rgba(0, 113, 227, 0.05);
        }
        body.dark-mode .nav-list a.active-nav-link {
            background-color: rgba(129, 178, 20, 0.1); /* Dark mode active bg */
        }

        .nav-actions { /* CTA buttons section (hidden by default on desktop) */
            display: none; /* Hidden on desktop, shown on mobile */
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            line-height: 1.2;
            flex-shrink: 0;
            min-width: 140px;
            max-width: 160px;
            justify-content: center;
        }
        .cta-button:hover {
            background-color: #0066cc;
            transform: translateY(-2px);
            box-shadow: 0 44px 12px rgba(0,0,0,0.15);
        }
        .cta-button.cta-button-secondary {
            background-color: #e8e8ed;
            color: #424245;
            box-shadow: none;
            border: 1px solid #dcdcdc;
        }
        .cta-button.cta-button-secondary:hover {
            background-color: #dcdcdc;
            color: #1d1d1f;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        body.dark-mode .cta-button {
            background-color: var(--primary-color); /* Dark mode primary button */
            box-shadow: 0 2px 8px rgba(129, 178, 20, 0.3);
        }
        body.dark-mode .cta-button:hover {
            background-color: #729a17;
            box-shadow: 0 4px 12px rgba(129, 178, 20, 0.5);
        }
        body.dark-mode .cta-button.cta-button-secondary {
            background-color: var(--card-bg-light);
            color: var(--text-color-light);
            border-color: var(--border-color-dark);
        }
        body.dark-mode .cta-button.cta-button-secondary:hover {
            background-color: var(--border-color-dark);
            color: var(--text-color-light);
        }


        .hamburger-menu {
            display: none; /* Hidden on desktop, shown on mobile */
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color-light);
            transition: color 0.3s ease;
        }
        body.dark-mode .hamburger-menu {
            color: var(--text-color-light);
        }

        /* Pulse Grid Noodle Rope Styling - Now Baobab Roots */
        .pulse-grid-noodle-rope {
            display: flex;
            align-items: center;
            height: 6px; /* Thicker, like a robust root */
            width: 150px; /* Slightly longer to emphasize root-like extension */
            background-color: #5C4033; /* Darker earthy brown for the root */
            border-radius: 3px; /* More rounded, less sharp */
            position: relative;
            margin: 0 20px;
            opacity: 0.9; /* More solid like a root */
            flex-shrink: 0;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); /* Inner shadow for depth */
        }
        body.dark-mode .pulse-grid-noodle-rope {
            background-color: #6F4E37; /* Lighter earthy brown for dark mode */
        }

        .noodle-dot {
            position: absolute;
            width: 10px; /* Larger dots */
            height: 10px; /* Larger dots */
            background-color: #D4AF37; /* Gold/amber for a sap-like glow */
            border-radius: 50%;
            transform: translate(-50%, -50%);
            top: 50%;
            animation: pulse 3s infinite ease-in-out;
            box-shadow: 0 0 8px rgba(212, 175, 55, 0.7); /* More prominent glow */
        }
        .noodle-dot.dot-stepdad {
            width: 12px; /* Even larger for stepdad */
            height: 12px; /* Even larger for stepdad */
            background-color: #5F9EA0; /* CadetBlue for a subtle unique "nutrient" dot */
            box-shadow: 0 0 10px rgba(95, 158, 160, 0.7); /* Matching glow */
        }

        /* Staggered animation delays (no change to values as requested) */
        .noodle-dot.dot-1 { left: 0%; animation-delay: 0s; }
        .noodle-dot.dot-2 { left: 20%; animation-delay: 0.5s; }
        .noodle-dot.dot-3 { left: 40%; animation-delay: 1s; }
        .noodle-dot.dot-stepdad { left: 60%; animation-delay: 1.5s; }
        .noodle-dot.dot-4 { left: 80%; animation-delay: 2s; }
        .noodle-dot.dot-5 { left: 100%; animation-delay: 2.5s; }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.7; }
            50% { transform: translate(-50%, -50%) scale(1.5); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.7; }
        }

        /* Hero Content Section (original first section) */
        .innovate-connect-thrive-section {
            padding: 4rem 1.5rem;
            text-align: center;
            color: var(--text-color-light);
            background-color: var(--bg-color-light);
            border-bottom: 1px solid var(--border-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode .innovate-connect-thrive-section {
            background-color: var(--bg-color-light);
            border-bottom-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        .innovate-connect-thrive-section h2 {
            font-size: 3.5rem;
            font-weight: 800;
            letter-spacing: -0.03em;
            color: var(--text-color-light);
            line-height: 1.1;
            margin-bottom: 1.5rem;
            transition: color 0.5s ease;
        }
        body.dark-mode .innovate-connect-thrive-section h2 {
            color: var(--text-color-light);
        }
        .innovate-connect-thrive-section h2 span {
            color: var(--primary-color); /* Apple Blue accent */
        }
        .innovate-connect-thrive-section p {
            font-size: 1.2rem;
            font-weight: 400;
            color: var(--muted-text-light);
            max-width: 800px;
            margin: 0 auto 2.5rem;
            line-height: 1.5;
            transition: color 0.5s ease;
        }
        body.dark-mode .innovate-connect-thrive-section p {
            color: var(--muted-text-light);
        }
        .innovate-connect-thrive-section .cta-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 1rem;
        }

        /* Hero Section (now just canvas background) */
        .hero-canvas-section {
            position: relative;
            min-height: 70vh; /* Increased height for immersive effect */
            background-color: var(--bg-color-light); /* Explicitly set to pure white */
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.5s ease;
        }
        body.dark-mode .hero-canvas-section {
            background-color: var(--bg-color-light); /* Also dark in dark mode */
        }
        .hero-canvas-section #rhythmicCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
            z-index: 0;
            background-color: transparent;
        }
        .hero-canvas-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(0, 113, 227, 0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: 1;
            animation: subtlePulse 5s infinite ease-in-out alternate;
        }
        body.dark-mode .hero-canvas-overlay {
            background: radial-gradient(circle at center, rgba(129, 178, 20, 0.15) 0%, transparent 70%); /* Dark mode primary accent */
        }

        @keyframes subtlePulse {
            0% { opacity: 0.6; transform: scale(1); }
            100% { opacity: 0.8; transform: scale(1.05); }
        }

        /* New Baobab Terminal Section */
        #baobab-terminal-access {
            padding: 8rem 2rem;
            background-color: var(--baobab-primary-dark); /* Dark corporate background */
            color: var(--baobab-light-text);
            text-align: center;
            border-bottom: 1px solid var(--baobab-border-gray);
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode #baobab-terminal-access {
            background-color: var(--baobab-primary-dark);
            color: var(--baobab-light-text);
            border-bottom-color: var(--baobab-border-gray);
        }
        #baobab-terminal-access h2 {
            font-size: 3.5rem;
            font-weight: 800;
            letter-spacing: -0.03em;
            color: var(--baobab-gold); /* Gold accent */
            line-height: 1.1;
            margin-bottom: 1.5rem;
            transition: color 0.5s ease;
        }
        body.dark-mode #baobab-terminal-access h2 {
            color: var(--baobab-gold);
        }
        #baobab-terminal-access p {
            font-size: 1.2rem;
            color: var(--baobab-light-text);
            max-width: 800px;
            margin: 0 auto 2.5rem;
            transition: color 0.5s ease;
        }
        body.dark-mode #baobab-terminal-access p {
            color: var(--baobab-light-text);
        }
        #baobab-terminal-access .terminal-iframe-container { /* Renamed to .terminal-embedded-container */
            width: 100%;
            max-width: 900px;
            height: 700px;
            margin: 3rem auto 0;
            background-color: #0d0d0d; /* Very dark background for terminal iframe */
            border: 2px solid var(--baobab-gold); /* Gold border */
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(184, 134, 11, 0.4); /* Gold glow */
            position: relative;
            display: flex; /* Added for terminal internal layout */
            flex-direction: column; /* Added for terminal internal layout */
            transition: background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
        }
        body.dark-mode #baobab-terminal-access .terminal-iframe-container {
            background-color: #0d0d0d;
            border-color: var(--baobab-gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6); /* Brighter gold glow */
        }


        /* Baobabe Terminal specific styles - Integrated */
        .baobabe-terminal-container {
            width: 100%;
            height: 100%; /* Take full height of parent */
            background-color: #000; /* Pure black for terminal background */
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Ensure content inside respects border-radius */
        }

        .baobabe-terminal-header {
            background-color: #2d3748; /* Darker header */
            color: #cbd5e0;
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem; /* sm text */
            font-weight: bold;
            border-bottom: 1px solid #4a5568;
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .baobabe-terminal-header {
            background-color: #1a1a1a; /* Even darker header in terminal */
            color: #f0f0f0;
            border-bottom-color: #3a3a3a;
        }

        .baobabe-terminal-header-buttons span {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 0.5rem;
        }
        .baobabe-terminal-header-buttons .red { background-color: #ef4444; }
        .baobabe-terminal-header-buttons .yellow { background-color: #fbbf24; }
        .baobabe-terminal-header-buttons .green { background-color: #10b981; }

        .baobabe-terminal-output {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto; /* Scrollable output */
            font-size: 0.875rem;
            line-height: 1.5;
            white-space: pre-wrap; /* Preserve whitespace and wrap lines */
            word-break: break-all; /* Break long words */
            color: #a0aec0; /* Lighter grey for output text */
            transition: color 0.5s ease;
        }
        body.dark-mode .baobabe-terminal-output {
            color: #bbbbbb; /* Lighter text in dark terminal */
        }

        .baobabe-terminal-input-area {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-top: 1px solid #4a5568;
            background-color: #000; /* Keep input area black */
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode .baobabe-terminal-input-area {
            background-color: #000;
            border-top-color: #3a3a3a;
        }

        .baobabe-terminal-prompt {
            color: #48bb78; /* Green prompt */
            margin-right: 0.5rem;
            font-weight: bold;
            transition: color 0.5s ease;
        }
        body.dark-mode .baobabe-terminal-prompt {
            color: #90ee90; /* Lighter green in dark terminal */
        }

        .baobabe-terminal-input {
            background-color: transparent;
            border: none;
            outline: none;
            flex-grow: 1;
            color: #fff; /* White input text */
            font-size: 0.875rem;
            caret-color: #48bb78; /* Green caret */
            transition: color 0.5s ease, caret-color 0.5s ease;
        }
        body.dark-mode .baobabe-terminal-input {
            color: #f5f5f5;
            caret-color: #90ee90;
        }

        .baobab-terminal-btn {
            background-color: var(--baobab-gold); /* Gold button */
            color: var(--baobab-primary-dark); /* Dark text on gold */
            padding: 1rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            margin-top: 2rem;
        }
        .baobab-terminal-btn:hover {
            background-color: #DAA520; /* Darker gold on hover */
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        .baobab-terminal-btn .icon {
            font-size: 1.3em;
        }


        /* Sections - Clean, defined blocks (general styling) */
        section {
            padding: 8rem 2rem;
            background-color: var(--bg-color-light); /* Ensure all sections have pure white background */
            box-shadow: none;
            border-bottom: 1px solid var(--border-color-light);
            text-align: center;
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        section:last-of-type {
            border-bottom: none;
        }
        section h2, section h3 {
            color: var(--text-color-light);
            font-weight: 700;
            letter-spacing: -0.03em;
            margin-bottom: 2rem;
            font-size: 2.2rem;
            transition: color 0.5s ease;
        }
        body.dark-mode section h2, body.dark-mode section h3 {
            color: var(--text-color-light);
        }
        section p {
            color: var(--muted-text-light);
            font-size: 1.1rem;
            line-height: 1.5;
            transition: color 0.5s ease;
        }
        body.dark-mode section p {
            color: var(--muted-text-light);
        }


        /* Specific section background overrides to ensure white/dark on toggle */
        #shareprice, #seedwave, .founders-note-section, #vault-access, .sector-scrolls-section, #treaty, #vaultmesh, #about, #cta, footer {
            background-color: var(--bg-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode #shareprice, body.dark-mode #seedwave, body.dark-mode .founders-note-section,
        body.dark-mode #vault-access, body.dark-mode .sector-scrolls-section, body.dark-mode #treaty,
        body.dark-mode #vaultmesh, body.dark-mode #about, body.dark-mode #cta, body.dark-mode footer {
            background-color: var(--bg-color-light);
            border-color: var(--border-color-dark);
        }


        /* Share Signal Section - Clean data display */
        #shareprice h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        #price {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary-color);
            letter-spacing: -0.02em;
        }
        body.dark-mode #price {
            color: var(--primary-color);
        }
        #timestamp {
            color: var(--muted-text-light);
            font-size: 0.85rem;
        }

        /* Seedwave Growth - Integrated chart */
        #seedwave h2 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: var(--text-color-light);
        }
        body.dark-mode #seedwave h2 {
            color: var(--text-color-light);
        }
        #seedwave .w-full.max-w-4xl {
            background-color: #fcfcfc;
            border: 1px solid var(--border-color-light);
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode #seedwave .w-full.max-w-4xl {
            background-color: var(--card-bg-light);
            border-color: var(--border-color-dark);
        }

        /* Founder's Note - Elegant text block */
        .founders-note-section h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-color-light);
        }
        body.dark-mode .founders-note-section h2 {
            color: var(--text-color-light);
        }
        .founders-note-section p {
            font-size: 1.1rem;
            color: var(--muted-text-light);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        .founders-note-section p.italic {
            color: var(--muted-text-light);
            font-style: italic;
        }
        .founders-note-section p.font-semibold {
            color: var(--primary-color);
            font-weight: 600;
            margin-top: 2rem;
        }
        body.dark-mode .founders-note-section p.font-semibold {
            color: var(--primary-color);
        }

        /* Vault Terminal Access - Clean buttons */
        #vault-access {
            background-color: var(--card-bg-light);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--border-color-light);
        }
        #vault-access h3 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-color-light);
            margin-bottom: 2.5rem;
        }
        body.dark-mode #vault-access h3 {
            color: var(--text-color-light);
        }
        #vault-access .w-full.h-\[800px\] { /* Iframe container */
            background-color: #f0f0f0; /* Light gray background for iframe */
            border: 1px solid #dcdcdc; /* Light border */
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
        }
        body.dark-mode #vault-access .w-full.h-\[800px\] {
            background-color: var(--bg-color-dark);
            border-color: var(--border-color-dark);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .terminal-btn {
            background-color: #f0f0f0; /* Light gray button */
            color: #424245;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #dcdcdc;
            cursor: pointer;
        }
        .terminal-btn:hover {
            background-color: #e8e8ed;
            color: #1d1d1f;
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .terminal-btn.ring { /* Active state */
            border-color: #0071e3;
            box-shadow: 0 0 0 2px #0071e3;
        }
        body.dark-mode .terminal-btn {
            background-color: var(--card-bg-light);
            color: var(--text-color-light);
            border-color: var(--border-color-dark);
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        body.dark-mode .terminal-btn:hover {
            background-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        body.dark-mode .terminal-btn.ring {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px var(--primary-color);
        }


        /* Sector Scrolls - Clean link grid */
        .sector-scrolls-section h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-color-light);
            margin-bottom: 2.5rem;
        }
        body.dark-mode .sector-scrolls-section h2 {
            color: var(--text-color-light);
        }
        .glyph {
            background-color: #ffffff; /* White background */
            color: #424245;
            padding: 0.8rem 1.2rem;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #e8e8ed;
            text-decoration: none; /* Remove underline for links */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .glyph:hover {
            background-color: #f0f0f0;
            color: #1d1d1f;
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        body.dark-mode .glyph {
            background-color: var(--card-bg-light);
            color: var(--text-color-light);
            border-color: var(--border-color-dark);
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        body.dark-mode .glyph:hover {
            background-color: var(--border-color-dark);
            color: var(--text-color-light);
        }

        /* Treaty Section - Elegant quote */
        #treaty h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-color-light);
            margin-bottom: 1.5rem;
        }
        body.dark-mode #treaty h2 {
            color: var(--text-color-light);
        }
        #treaty p {
            font-size: 1.1rem;
            color: var(--muted-text-light);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 2rem;
        }
        #treaty blockquote {
            font-size: 1.5rem;
            color: var(--text-color-light);
            font-weight: 600;
            line-height: 1.4;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        body.dark-mode #treaty blockquote {
            color: var(--text-color-light);
        }
        #treaty blockquote::before, #treaty blockquote::after {
            content: 'â€œ'; /* Apple-style quotes */
            font-size: 2.5em;
            line-height: 0.1;
            vertical-align: -0.4em;
            color: #dcdcdc; /* Muted quote color */
            margin-right: 0.1em;
        }
        body.dark-mode #treaty blockquote::before, body.dark-mode #treaty blockquote::after {
            color: #555555; /* Darker muted quote color */
        }

        /* Signal Packet - Developer focused, clean code block */
        .signal-packet-section {
            background-color: #1d1d1f; /* Dark background for code */
            color: #00e393; /* Greenish text for code */
            padding: 4rem 1.5rem;
            border-bottom: 1px solid #333;
            text-align: center;
            font-size: 0.75rem; /* text-xs equivalent */
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode .signal-packet-section {
            background-color: var(--bg-color-dark);
            border-bottom-color: #444;
            color: #90ee90; /* Lighter green */
        }
        .signal-packet-section pre {
            background-color: #0a0a0a; /* Even darker code block */
            border: 1px solid #333;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
            white-space: pre-wrap; /* Allow wrapping for long lines */
            word-break: break-all;
        }
        body.dark-mode .signal-packet-section pre {
            background-color: #000; /* Pure black in dark mode */
            border-color: #444;
        }


        /* VaultMesh Executive Summary - Structured and readable */
        #vaultmesh h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-color-light);
            margin-bottom: 1.5rem;
        }
        body.dark-mode #vaultmesh h2 {
            color: var(--text-color-light);
        }
        #vaultmesh h2.text-purple-400 {
            color: var(--primary-color); /* Apple blue for main heading */
        }
        body.dark-mode #vaultmesh h2.text-purple-400 {
            color: var(--primary-color);
        }
        #vaultmesh h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-color-light);
            margin-top: 2.5rem;
            margin-bottom: 1rem;
        }
        body.dark-mode #vaultmesh h3 {
            color: var(--text-color-light);
        }
        #vaultmesh p {
            font-size: 1.05rem;
            color: var(--muted-text-light);
            line-height: 1.5;
        }
        body.dark-mode #vaultmesh p {
            color: var(--muted-text-light);
        }
        #vaultmesh ul {
            list-style-type: disc;
            margin-left: 1.5rem;
            color: var(--muted-text-light);
        }
        body.dark-mode #vaultmesh ul {
            color: var(--muted-text-light);
        }
        #vaultmesh ul li {
            font-size: 1.05rem;
            margin-bottom: 0.5rem;
        }
        #vaultmesh ul.list-decimal {
            list-style-type: decimal;
        }
        #vaultmesh code {
            background-color: #e8e8ed;
            padding: 0.2em 0.4em;
            border-radius: 4px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            color: var(--text-color-light);
        }
        body.dark-mode #vaultmesh code {
            background-color: #444444;
            color: var(--text-color-light);
        }

        /* About Section - Simple and clear */
        #about h3 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-color-light);
            margin-bottom: 1.5rem;
        }
        body.dark-mode #about h3 {
            color: var(--text-color-light);
        }
        #about p {
            font-size: 1.1rem;
            color: var(--muted-text-light);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        body.dark-mode #about p {
            color: var(--muted-text-light);
        }

        /* Call to Action Section - Prominent and inviting */
        #cta h3 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-color-light);
            margin-bottom: 1.5rem;
        }
        body.dark-mode #cta h3 {
            color: var(--text-color-light);
        }
        #cta p {
            font-size: 1.2rem;
            color: var(--muted-text-light);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 2.5rem;
        }
        body.dark-mode #cta p {
            color: var(--muted-text-light);
        }

        /* Footer - Minimalist */
        footer {
            border-top: 1px solid var(--border-color-light);
            text-align: center;
            color: var(--muted-text-light);
            padding: 2rem;
            font-size: 0.85rem;
        }
        body.dark-mode footer {
            border-top-color: var(--border-color-dark);
            color: var(--muted-text-light);
        }
        footer a {
            color: var(--muted-text-light);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        footer a:hover {
            color: var(--text-color-light);
        }
        body.dark-mode footer a {
            color: var(--muted-text-light);
        }
        body.dark-mode footer a:hover {
            color: var(--text-color-light);
        }

        /* Admin Portal Specific Styles (Integrated into Apple.com style) */
        .admin-portal-container {
            padding: 4rem 2rem; /* Consistent padding for the whole section */
            background-color: var(--bg-color-light); /* White background for the entire admin section */
            border-bottom: 1px solid var(--border-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode .admin-portal-container {
            background-color: var(--bg-color-light);
            border-bottom-color: var(--border-color-dark);
        }
        .admin-portal-container h1 {
            color: var(--text-color-light); /* Dark text for admin header title */
        }
        body.dark-mode .admin-portal-container h1 {
            color: var(--text-color-light);
        }
        .admin-portal-container .admin-header {
            background: #f5f5f7; /* Very light background for admin header bar */
            color: var(--text-color-light); /* Dark text */
            padding: 1.5rem 2rem;
            box-shadow: none;
            border-bottom: 1px solid var(--border-color-light);
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
            margin-bottom: 2rem;
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .admin-portal-container .admin-header {
            background-color: var(--card-bg-light);
            color: var(--text-color-light);
            border-bottom-color: var(--border-color-dark);
        }
        .admin-portal-container .admin-header .access-button {
            background-color: var(--primary-color);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: none;
        }
        body.dark-mode .admin-portal-container .admin-header .access-button {
            background-color: var(--primary-color);
        }

        .admin-portal-container main.admin-main-content {
            background-color: var(--bg-color-light);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            margin-top: 0;
            border: 1px solid var(--border-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
        }
        body.dark-mode .admin-portal-container main.admin-main-content {
            background-color: var(--bg-color-light);
            border-color: var(--border-color-dark);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        .admin-portal-container main.admin-main-content section {
            background-color: #fcfcfc; /* Very light background for sub-sections */
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 1px 5px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color-light);
            margin-bottom: 1.5rem; /* Margin between sections */
            transition: background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
        }
        body.dark-mode .admin-portal-container main.admin-main-content section {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            box-shadow: 0 1px 5px rgba(0,0,0,0.2);
        }
        .admin-portal-container main.admin-main-content input, .admin-portal-container main.admin-main-content select {
            background-color: var(--bg-color-light);
            border-color: #d1d1d6;
            color: var(--text-color-light);
            border-radius: 6px;
            padding: 0.6rem 0.8rem;
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .admin-portal-container main.admin-main-content input, body.dark-mode .admin-portal-container main.admin-main-content select {
            background-color: var(--bg-color-dark);
            border-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        .admin-portal-container main.admin-main-content input:focus, .admin-portal-container main.admin-main-content select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 113, 227, 0.3);
        }
        body.dark-mode .admin-portal-container main.admin-main-content input:focus, body.dark-mode .admin-portal-container main.admin-main-content select:focus {
            box-shadow: 0 0 0 2px rgba(129, 178, 20, 0.3);
        }
        .admin-portal-container main.admin-main-content button {
            background: var(--primary-color);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        body.dark-mode .admin-portal-container main.admin-main-content button {
            background: var(--primary-color);
        }
        body.dark-mode .admin-portal-container main.admin-main-content button:hover {
            background-color: #729a17;
        }


        .admin-portal-container .snapshot-box {
            background: #fcfcfc;
            border: 1px solid var(--border-color-light);
            color: var(--text-color-light);
            box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .admin-portal-container .snapshot-box {
            background: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        .admin-portal-container .brand-snapshot {
            background-color: var(--bg-color-light);
            border: 1px solid var(--border-color-light);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
        }
        body.dark-mode .admin-portal-container .brand-snapshot {
            background-color: var(--card-bg-light);
            border-color: var(--border-color-dark);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }


        /* FAA.ZONE INDEX Table Styling (Admin) */
        .admin-portal-container .admin-table {
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 12px;
            overflow: hidden;
        }
        .admin-portal-container .admin-table thead {
            background-color: #f5f5f7;
            color: #424245;
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .admin-portal-container .admin-table thead {
            background-color: #3a3a3a;
            color: var(--text-color-light);
        }
        .admin-portal-container .admin-table th, .admin-portal-container .admin-table td {
            padding: 0.8rem 1rem;
            border-bottom: 1px solid var(--border-color-light);
            border-right: 1px solid var(--border-color-light);
            text-align: left;
            transition: border-color 0.5s ease;
        }
        body.dark-mode .admin-portal-container .admin-table th, body.dark-mode .admin-portal-container .admin-table td {
            border-bottom-color: var(--border-color-dark);
            border-right-color: var(--border-color-dark);
        }
        .admin-portal-container .admin-table th:last-child,
        .admin-portal-container .admin-table td:last-child {
            border-right: none;
        }
        .admin-portal-container .admin-table tbody tr {
            background-color: var(--bg-color-light);
            transition: background-color 0.5s ease;
        }
        body.dark-mode .admin-portal-container .admin-table tbody tr {
            background-color: var(--card-bg-light);
        }
        .admin-portal-container .admin-table tbody tr:hover {
            background-color: #f0f0f5;
        }
        body.dark-mode .admin-portal-container .admin-table tbody tr:hover {
            background-color: #444444;
        }
        .admin-portal-container .admin-table tbody tr:nth-child(odd) {
            background-color: #fcfcfc;
        }
        body.dark-mode .admin-portal-container .admin-table tbody tr:nth-child(odd) {
            background-color: var(--card-bg-dark);
        }
        .admin-portal-container .admin-table button.text-blue-400 { color: var(--primary-color); }
        .admin-portal-container .admin-table button.text-blue-400:hover { background-color: rgba(0, 113, 227, 0.1); }
        body.dark-mode .admin-portal-container .admin-table button.text-blue-400 { color: var(--primary-color); }
        body.dark-mode .admin-portal-container .admin-table button.text-blue-400:hover { background-color: rgba(129, 178, 20, 0.1); }
        .admin-portal-container .admin-table button.text-green-400 { color: var(--secondary-color); }
        .admin-portal-container .admin-table button.text-green-400:hover { background-color: rgba(48, 209, 88, 0.1); }
        body.dark-mode .admin-portal-container .admin-table button.text-green-400 { color: var(--secondary-color); }
        body.dark-mode .admin-portal-container .admin-table button.text-green-400:hover { background-color: rgba(252, 163, 17, 0.1); }

        /* Top Navigation (Admin) */
        .admin-portal-container .top-nav {
            background-color: #f5f5f7;
            border-bottom: 1px solid var(--border-color-light);
            box-shadow: none;
            border-radius: 0;
            margin-bottom: 2rem;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            padding: 0.75rem 1.25rem; /* Adjusted padding */
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode .admin-portal-container .top-nav {
            background-color: var(--card-bg-light);
            border-bottom-color: var(--border-color-dark);
        }
        .admin-portal-container .top-nav a {
            color: #424245;
            position: relative;
            padding: 0.5rem 0.8rem; /* Adjusted padding */
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
        }
        body.dark-mode .admin-portal-container .top-nav a {
            color: var(--muted-text-light);
        }
        body.dark-mode .admin-portal-container .top-nav a:hover {
            color: var(--text-color-light);
            background-color: rgba(255,255,255,0.05);
        }
        .admin-portal-container .top-nav a::after {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }
        body.dark-mode .admin-portal-container .top-nav a::after {
            background: var(--primary-color);
        }
        .admin-portal-container .top-nav a.active {
            color: var(--primary-color);
            background-color: rgba(0, 113, 227, 0.05);
        }
        body.dark-mode .admin-portal-container .top-nav a.active {
            color: var(--primary-color);
            background-color: rgba(129, 178, 20, 0.1);
        }

        /* Metrics Section (Admin) */
        .admin-portal-container .metrics-grid a {
            background-color: var(--bg-color-light);
            color: var(--text-color-light);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color-light);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            display: block;
            transition: all 0.2s ease-in-out, background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .admin-portal-container .metrics-grid a {
            background-color: var(--card-bg-light);
            color: var(--text-color-light);
            border-color: var(--border-color-dark);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        body.dark-mode .admin-portal-container .metrics-grid a:hover {
            background-color: #444444;
        }
        .admin-portal-container .metrics-grid h3 {
            color: var(--muted-text-light);
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        body.dark-mode .admin-portal-container .metrics-grid h3 {
            color: var(--muted-text-light);
        }
        .admin-portal-container .metrics-grid p {
            color: var(--primary-color);
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }
        body.dark-mode .admin-portal-container .metrics-grid p {
            color: var(--primary-color);
        }

        /* Sidebar Specific Styles (not directly in this HTML, but for consistency if used) */
        #sidebar {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid var(--border-color-light);
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode #sidebar {
            background-color: rgba(26, 26, 28, 0.9);
            border-right-color: var(--border-color-dark);
        }
        #sidebar h2 {
            color: var(--muted-text-light);
            transition: color 0.5s ease;
        }
        body.dark-mode #sidebar h2 {
            color: var(--muted-text-light);
        }
        #sidebar .menu-item {
            color: #424245;
            transition: all 0.2s ease-in-out;
        }
        body.dark-mode #sidebar .menu-item {
            color: var(--text-color-light);
        }
        body.dark-mode #sidebar .menu-item:hover { background-color: rgba(255,255,255,0.05); color: var(--primary-color); }
        #sidebar .menu-item-active {
            background-color: rgba(0, 113, 227, 0.1);
            color: var(--primary-color);
        }
        body.dark-mode #sidebar .menu-item-active {
            background-color: rgba(129, 178, 20, 0.1);
            color: var(--primary-color);
        }
        #sidebar .menu-item-icon-inactive { color: var(--muted-text-light); }
        body.dark-mode #sidebar .menu-item-icon-inactive { color: var(--muted-text-light); }
        #sidebar .menu-dropdown-item {
            color: #424245;
        }
        body.dark-mode #sidebar .menu-dropdown-item {
            color: var(--muted-text-light);
        }
        body.dark-mode #sidebar .menu-dropdown-item:hover { background-color: rgba(255,255,255,0.02); color: var(--primary-color); }
        #sidebar .menu-dropdown-item-active { background-color: rgba(0, 113, 227, 0.05); color: var(--primary-color); }
        body.dark-mode #sidebar .menu-dropdown-item-active { background-color: rgba(129, 178, 20, 0.05); color: var(--primary-color); }
        #sidebar .menu-dropdown-badge {
            background-color: var(--border-color-light);
            color: var(--muted-text-light);
        }
        body.dark-mode #sidebar .menu-dropdown-badge {
            background-color: var(--border-color-dark);
            color: var(--muted-text-light);
        }
        .submenu-arrow { color: var(--muted-text-light); }
        body.dark-mode .submenu-arrow {
            color: var(--muted-text-light);
        }
        .menu-item-active .submenu-arrow, .submenu-content.open + .menu-item .submenu-arrow {
            color: var(--primary-color);
        }
        body.dark-mode .menu-item-active .submenu-arrow, body.dark-mode .submenu-content.open + .menu-item .submenu-arrow {
            color: var(--primary-color);
        }


        /* Chart.js specific container styles for admin charts */
        .chart-container { position: relative; width: 100%; margin-left: auto; margin-right: auto; }
        .chart-container-doughnut { max-width: 400px; height: 400px; }
        .chart-container-bar { max-width: 100%; height: 400px; }

        /* Admin portal text color adjustments for light background */
        .admin-portal-container .admin-main-content h2,
        .admin-portal-container .admin-main-content h3,
        .admin-portal-container .admin-main-content label { color: var(--text-color-light); }
        body.dark-mode .admin-portal-container .admin-main-content h2,
        body.dark-mode .admin-portal-container .admin-main-content h3,
        body.dark-mode .admin-portal-container .admin-main-content label { color: var(--text-color-light); }
        .admin-portal-container .admin-main-content p,
        .admin-portal-container .admin-table tbody td { color: #424245; }
        body.dark-mode .admin-portal-container .admin-main-content p,
        body.dark-mode .admin-portal-container .admin-table tbody td { color: var(--muted-text-light); }
        .admin-portal-container .admin-main-content #adminStatus { color: var(--muted-text-light); }
        body.dark-mode .admin-portal-container .admin-main-content #adminStatus { color: var(--muted-text-light); }
        .admin-portal-container .snapshot-box h4 { color: var(--primary-color); }
        body.dark-mode .admin-portal-container .snapshot-box h4 { color: var(--primary-color); }
        .admin-portal-container .snapshot-box ul li { color: #424245; }
        body.dark-mode .admin-portal-container .snapshot-box ul li { color: var(--muted-text-light); }
        .admin-portal-container .bg-gray-700 { /* Adjusting general gray-700 where used in admin section */
            background-color: #fcfcfc; color: var(--text-color-light);
        }
        body.dark-mode .admin-portal-container .bg-gray-700 {
            background-color: var(--card-bg-dark);
            color: var(--text-color-light);
        }

        /* Baobab Global Dashboard specific styles (from baobab_spa_dashboard.html) */
        .dashboard-app-container {
            background-color: var(--baobab-slate-light);
            transition: background-color 0.5s ease;
        }
        body.dark-mode .dashboard-app-container {
            background-color: var(--baobab-slate-light);
        }
        .dashboard-main-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 2.5rem; /* Adjusted padding */
            background-color: var(--baobab-slate-light);
            color: var(--text-color-light); /* Default text color */
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .dashboard-main-content {
            background-color: var(--baobab-slate-light);
            color: var(--text-color-light);
        }
        .dashboard-view { /* Base class for dashboard views */
            background-color: var(--bg-color-light);
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: background-color 0.5s ease, box-shadow 0.5s ease;
        }
        body.dark-mode .dashboard-view {
            background-color: var(--card-bg-light);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .dashboard-header-h2 {
             color: var(--text-color-light); /* Darker text */
        }
        body.dark-mode .dashboard-header-h2 {
            color: var(--text-color-light);
        }
        .dashboard-header-p {
             color: var(--muted-text-light);
        }
        body.dark-mode .dashboard-header-p {
            color: var(--muted-text-light);
        }

        /* Dashboard Metric Cards */
        .dashboard-metric-card {
            background-color: var(--bg-color-light);
            border: 1px solid var(--border-color-light);
            color: var(--text-color-light); /* Ensure text is dark */
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .dashboard-metric-card {
            background-color: var(--card-bg-light);
            border-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        .dashboard-metric-card h3 {
            font-weight: 600;
            color: var(--muted-text-light);
        }
        body.dark-mode .dashboard-metric-card h3 {
            color: var(--muted-text-light);
        }
        .dashboard-metric-card p {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color); /* Apple Blue for numbers */
        }
        body.dark-mode .dashboard-metric-card p {
            color: var(--primary-color);
        }

        /* Tech Stack Section */
        .tech-pillar {
            background-color: var(--bg-color-light);
            border-top-color: var(--border-color-light);
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.5s ease, border-color 0.5s ease;
        }
        body.dark-mode .tech-pillar {
            background-color: var(--card-bg-light);
            border-top-color: var(--border-color-dark);
        }
        .tech-pillar h3 {
            color: var(--text-color-light);
        }
        body.dark-mode .tech-pillar h3 {
            color: var(--text-color-light);
        }
        .tech-pillar p {
            color: var(--muted-text-light);
        }
        body.dark-mode .tech-pillar p {
            color: var(--muted-text-light);
        }
        #tech-stack-content {
            background-color: #fcfcfc;
            border: 1px solid var(--border-color-light);
            color: var(--text-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode #tech-stack-content {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        #tech-stack-content h3 {
            color: var(--primary-color);
        }
        body.dark-mode #tech-stack-content h3 {
            color: var(--primary-color);
        }
        #tech-stack-content p, #tech-stack-content ul {
            color: var(--muted-text-light);
        }
        body.dark-mode #tech-stack-content p, body.dark-mode #tech-stack-content ul {
            color: var(--muted-text-light);
        }

        /* Ecosystem Explorer */
        .explorer-brand-card {
            background-color: var(--bg-color-light);
            border: 1px solid var(--border-color-light);
            color: var(--text-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .explorer-brand-card {
            background-color: var(--card-bg-light);
            border-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        .explorer-brand-card h4 {
            color: var(--primary-color);
        }
        body.dark-mode .explorer-brand-card h4 {
            color: var(--primary-color);
        }
        .explorer-brand-card p {
            color: var(--muted-text-light);
        }
        body.dark-mode .explorer-brand-card p {
            color: var(--muted-text-light);
        }

        /* Sovereign Scrolls */
        .progress-bar-container {
            background-color: var(--border-color-light);
            transition: background-color 0.5s ease;
        }
        body.dark-mode .progress-bar-container {
            background-color: var(--border-color-dark);
        }
        .progress-bar {
            background-color: var(--primary-color);
            transition: width 0.5s ease-out, background-color 0.5s ease;
        }
        body.dark-mode .progress-bar {
            background-color: var(--primary-color);
        }
        .sovereign-scrolls-info {
            background-color: #fcfcfc;
            border: 1px solid var(--border-color-light);
            color: var(--text-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .sovereign-scrolls-info {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        .sovereign-scrolls-info h3 {
            color: var(--text-color-light);
        }
        body.dark-mode .sovereign-scrolls-info h3 {
            color: var(--text-color-light);
        }
        .sovereign-scrolls-info p, .sovereign-scrolls-info ul {
            color: var(--muted-text-light);
        }
        body.dark-mode .sovereign-scrolls-info p, body.dark-mode .sovereign-scrolls-info ul {
            color: var(--muted-text-light);
        }

        /* License & Clause Ledger */
        .ledger-metric-card {
            background-color: var(--bg-color-light);
            border: 1px solid var(--border-color-light);
            color: var(--text-color-light);
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        body.dark-mode .ledger-metric-card {
            background-color: var(--card-bg-light);
            border-color: var(--border-color-dark);
            color: var(--text-color-light);
        }
        .ledger-metric-card h3 {
            color: var(--muted-text-light);
        }
        body.dark-mode .ledger-metric-card h3 {
            color: var(--muted-text-light);
        }
        .ledger-metric-card p {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        body.dark-mode .ledger-metric-card p {
            color: var(--primary-color);
        }

        /* Chart-specific styling for consistency across all charts */
        .chart-options-default {
            background-color: var(--bg-color-light);
            transition: background-color 0.5s ease;
        }
        body.dark-mode .chart-options-default {
            background-color: var(--card-bg-dark);
        }
        .chart-options-default canvas {
            background-color: transparent; /* Charts should not have their own background */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header.main-header {
                flex-direction: column;
                padding-bottom: 10px;
                align-items: flex-start;
                padding-left: 20px;
                padding-right: 20px;
            }
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                width: 100%;
            }
            .logo-group {
                margin-bottom: 15px;
                width: 100%;
                justify-content: space-between;
            }
            .logo-fruitful { font-size: 1.4rem; }
            .pulse-grid-noodle-rope { display: none; } /* Hide on small screens */

            .main-nav {
                display: none; /* Hidden by default on mobile */
                flex-direction: column;
                position: static;
                width: 100%;
                background-color: var(--card-bg-light);
                border-top: 1px solid var(--border-color-light);
                padding: 10px 0;
                box-shadow: none;
            }
            .main-nav.active { display: flex; }
            .nav-list { flex-direction: column; text-align: center; width: 100%; gap: 10px; }
            .nav-list li { width: 100%; }
            .nav-list a { display: block; padding: 8px 0; }
            .nav-actions {
                flex-direction: column; gap: 10px; width: 100%; padding-top: 10px;
                border-top: 1px solid var(--border-color-light); margin-top: 10px;
            }
            .nav-actions .cta-button {
                width: calc(100% - 40px); margin: 0 20px; text-align: center;
            }

            .hamburger-menu {
                display: block;
                position: static;
                margin-left: auto;
                color: var(--text-color-light);
            }

            .innovate-connect-thrive-section h2 { font-size: 2.8rem; }
            .innovate-connect-thrive-section p { font-size: 1rem; }
            .innovate-connect-thrive-section .hero-cta-button { padding: 0.7rem 1.5rem; font-size: 0.9rem; }
            section { padding: 4rem 1.5rem; }
            section h2, section h3 { font-size: 1.8rem; margin-bottom: 1.5rem; }
            section p { font-size: 1rem; }
            .feature-grid { grid-template-columns: 1fr; }
            #shareprice h2 { font-size: 1.5rem; }
            #price { font-size: 2.5rem; }
            #vault-access .w-full.h-\[800px\] { height: 500px; }
            .terminal-btn { padding: 0.8rem 1rem; font-size: 0.9rem; }
            #treaty blockquote { font-size: 1.2rem; }
            #vaultmesh h2, #vaultmesh h3 { font-size: 1.8rem; }
            #vaultmesh p, #vaultmesh ul li { font-size: 0.95rem; }
            #cta h3 { font-size: 2rem; }
            #cta p { font-size: 1rem; }

            /* Baobab Terminal Access Section - Mobile */
            #baobab-terminal-access { padding: 4rem 1.5rem; }
            #baobab-terminal-access h2 { font-size: 2.2rem; }
            #baobab-terminal-access p { font-size: 1rem; }
            #baobab-terminal-access .terminal-iframe-container { height: 400px; } /* Use terminal-embedded-container */
            .baobab-terminal-btn { padding: 0.8rem 1.5rem; font-size: 1rem; }

            /* Baobab Global Dashboard - Mobile */
            .dashboard-main-content { padding: 1.5rem; }
            .dashboard-view { padding: 1.5rem; }
            .dashboard-header-h2 { font-size: 1.8rem; }
            .dashboard-metric-card p { font-size: 2rem; }
            .tech-pillar h3 { font-size: 1rem; }
            .tech-pillar p { font-size: 0.8rem; }
        }
    </style>
</head>
<body class="light-mode">

    <div id="announcement-bar">
        <span>âš¡ï¸ NEW: Baobab Security Networkâ„¢ Global Dashboard is Live!</span>
        <a href="#admin-global-dashboard">Explore the Insights Now</a>
        <button class="close-btn" aria-label="Close announcement">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <header class="main-header">
        <div class="container header-content">
            <div class="logo-group">
                <a href="index.html" class="logo-link">
                    <span class="logo-fruitful">Fruitfulâ„¢</span>
                </a>
                <span class="logo-separator">|</span>
                <span class="logo-omnigrid">OmniGridâ„¢</span>
                <button class="hamburger-menu" aria-label="Toggle navigation">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <div class="pulse-grid-noodle-rope">
                <span class="noodle-dot dot-1"></span>
                <span class="noodle-dot dot-2"></span>
                <span class="noodle-dot dot-3"></span>
                <span class="noodle-dot dot-stepdad"></span>
                <span class="noodle-dot dot-4"></span>
                <span class="noodle-dot dot-5"></span>
            </div>
            <nav class="main-nav">
                <ul class="nav-list">
                    <li><a href="https://homemart.africa" target="_blank">ðŸ›ï¸ Homemart.africa</a></li>
                    <li><a href="#innovate-connect-thrive" class="active-nav-link">âœ¨ Portal Home</a></li>
                    <li><a href="#features">ðŸ’¡ Features</a></li>
                    <li><a href="#shareprice">ðŸ“ˆ Signal</a></li>
                    <li><a href="#vault-access">ðŸ”’ Vault</a></li>
                    <li><a href="#treaty">ðŸ“œ Treaty</a></li>
                    <li><a href="#vaultmesh">ðŸ§  VaultMesh</a></li>
                    <li><a href="#baobab-terminal-access">ðŸŒ³ Baobab Terminal</a></li>
                    <li><a href="#admin-portal-section">âš™ï¸ Admin Portal</a></li>
                    <li><a href="#about">â„¹ï¸ About</a></li>
                    <li><a href="#cta">ðŸš€ Get Started</a></li>
                    <li><a href="https://faa.zone/careers/hiring-homepage.html">ðŸ’¼ Careers</a></li>
                    <li><a href="faa.zone/legal/index.html">ðŸ§¬ Developers</a></li>
                    <li><a href="https://faa.zone/legal/securesign.html">ðŸ–‹ï¸ SecureSignâ„¢</a></li>
                    <li><a href="https://faa.faa.zone/saas.html">ðŸ”‘ SaaS</a></li>
                    <li><a href="https://faa.zone/dashboard.html">ðŸ“Š Dashboard</a></li>
                    <li><a href="https://faa.zone/contact-us.html">âœ‰ï¸ Contact Us</a></li>
                    <li><a href="https://faa.zone/support.html">ðŸ†˜ Support</a></li>
                </ul>
            </nav>
            <div class="flex items-center gap-4 ml-4">
                <!-- Language Selection -->
                <div class="relative inline-block text-left">
                    <button id="langToggle" class="text-gray-600 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color px-3 py-1 rounded-md font-medium transition-colors duration-300">
                        <i class="fas fa-globe mr-2"></i><span id="currentLangDisplay">EN</span> <i class="fas fa-chevron-down ml-1 text-xs"></i>
                    </button>
                    <div id="langDropdown" class="absolute right-0 mt-2 w-28 rounded-md shadow-lg bg-white dark:bg-card-bg-dark ring-1 ring-black ring-opacity-5 focus:outline-none hidden">
                        <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="langToggle">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem" data-lang="en">English</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem" data-lang="es">EspaÃ±ol</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem" data-lang="fr">FranÃ§ais</a>
                        </div>
                    </div>
                </div>

                <!-- Baobabe Day/Night Toggle -->
                <button id="themeToggle" class="px-3 py-1 rounded-md font-medium transition-colors duration-300 text-gray-600 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color">
                    <i class="fas fa-sun" data-icon-light></i>
                    <i class="fas fa-moon hidden" data-icon-dark></i>
                </button>
            </div>
        </div>
    </header>

    <main>
        <section id="innovate-connect-thrive" class="innovate-connect-thrive-section">
            <h2 class="text-5xl md:text-6xl font-extrabold mb-6 leading-tight">
                Innovate. Connect. <span class="text-blue-600">Thrive.</span>
            </h2>
            <p class="max-w-3xl mx-auto text-xl leading-relaxed">
                Discover a new era of collaboration and sustainable growth with Fruitful's cutting-edge platform.
            </p>
            <div class="cta-group">
                <a href="https://faa.zone/omnigrid.html" class="hero-cta-button">
                    ðŸ•¸ï¸ Explore Ecosystem
                </a>
                <a href="https://baobab.faa.zone" class="hero-cta-button cta-button-secondary">
                    ðŸŒ³ Baobab Network
                </a>
                <a href="https://fruitfulcratedance.com/" class="hero-cta-button cta-button-secondary">
                    ðŸ“¦ Fruitfulâ„¢ Crate Dance
                </a>
                <a href="https://portal.faa.zone/payroll.html" class="hero-cta-button cta-button-secondary">
                    ðŸ’° Fruitfulâ„¢ Payroll
                </a>
                <a href="admin-login.html" class="hero-cta-button cta-button-secondary">
                    âš™ï¸ Admin Login
                </a>
                <a href="https://faa.zone/contact-us.html" class="hero-cta-button cta-button-secondary">
                    âœ‰ï¸ Contact Us
                </a>
            </div>
        </section>

        <section class="hero-canvas-section">
            <canvas id="rhythmicCanvas"></canvas>
            <div class="hero-canvas-overlay"></div>
        </section>

        <section id="baobab-terminal-access">
            <h2>ðŸŒ³ Baobab Security Networkâ„¢ Terminal</h2>
            <p>Access the unified global intelligence and operations hub powered by the Baobab Security Network. Experience real-time threat intelligence, strategic resource monitoring, and ethical governance protocols.</p>
            <div class="terminal-iframe-container">
                <!-- Embedded Baobabe Terminal Code Start -->
                <div class="baobabe-terminal-container">
                    <div class="baobabe-terminal-header">
                        <span>Baobabe Terminal</span>
                        <div class="baobabe-terminal-header-buttons">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                    </div>
                    <div id="terminalOutput" class="baobabe-terminal-output">
                        <span style="color: #48bb78;">Welcome to Baobabe Terminal!</span><br>
                        Type 'help' for a list of commands.<br>
                        <br>
                    </div>
                    <div class="baobabe-terminal-input-area">
                        <span class="baobabe-terminal-prompt">user@baobabe:~$</span>
                        <input type="text" id="terminalInput" class="baobabe-terminal-input" autofocus>
                    </div>
                </div>
                <!-- Embedded Baobabe Terminal Code End -->
            </div>
            <!-- Removed Launch Full Terminal button as it's now embedded -->
        </section>

        <section id="features" class="py-16 md:py-24 px-6 md:px-12">
            <div class="max-w-6xl mx-auto">
                <h3 class="text-4xl font-bold text-center mb-16">
                    Unlock Your Potential with Our Core Features
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="feature-card">
                        <div>ðŸ’¡</div>
                        <h4>AI-Powered Insights</h4>
                        <p>
                            Leverage advanced AI to gain deep insights, optimize operations, and make smarter decisions.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div>ðŸ¤</div>
                        <h4>Global Collaboration</h4>
                        <p>
                            Connect with thousands of independent brands and partners worldwide, fostering a network of mutual growth.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div>ðŸŒ±</div>
                        <h4>Sustainable Solutions</h4>
                        <p>
                            Champion eco-friendly practices and contribute to a healthier planet through our curated marketplace.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div>ðŸ”’</div>
                        <h4>Secure VaultMeshâ„¢</h4>
                        <p>
                            Protect your data and transactions with our state-of-the-art blockchain-inspired security protocols.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div>ðŸ“ˆ</div>
                        <h4>Real-time Analytics</h4>
                        <p>
                            Monitor your progress and impact with intuitive dashboards and real-time performance metrics.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div>ðŸŒ</div>
                        <h4>OmniScroll Integration</h4>
                        <p>
                            Seamlessly integrate with our OmniScroll ledger for transparent and efficient record-keeping.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="shareprice" class="py-12 text-center">
            <h2 class="text-3xl font-semibold mb-2">FAAâ„¢ Share Signal</h2>
            <div id="price" class="text-5xl font-bold">$88.88</div>
            <div class="text-sm text-gray-400 mt-1">Last updated: <span id="timestamp">Live</span></div>
        </section>

        <section id="seedwave" class="py-16 px-6 text-center">
            <h2 class="text-4xl font-bold mb-8">ðŸŒ± Seedwave Brand Growth ðŸŒ±</h2>
            <div class="w-full max-w-4xl mx-auto p-6 rounded-xl shadow-lg">
                <canvas id="brandChart"></canvas>
            </div>
        </section>

        <section class="py-16 px-6 text-center founders-note-section">
            <h2 class="text-4xl font-bold mb-8">ðŸ§¬ Founder's Glyphâ„¢</h2>
            <p class="max-w-3xl mx-auto text-xl leading-relaxed">
                FAAâ„¢ wasnâ€™t built like a typical startup. It emerged â€” out of silence, out of signal, out of glyphs and patterns that refused to be ignored.
                What you're seeing isn't a site. Itâ€™s a vault interface. A codebase of culture. A trust-machine powered by real human intelligence.
            </p>
            <p class="mt-6 max-w-2xl mx-auto italic">
                Where others scale with speed, we scale with meaning. Every brand here agreed to something deeper than growth â€” they signed a Treaty.
                Thatâ€™s why this isnâ€™t eCommerce. Itâ€™s TreatyCommerceâ„¢.
            </p>
            <p class="mt-6 font-semibold">â€” Written from the edge of code & culture ðŸŒ FAA.zoneâ„¢ Founder Glyph Activatedâ„¢</p>
        </section>

        <section id="vault-access" class="py-16 px-6">
            <h3 class="text-4xl font-bold text-center mb-10">ðŸ” Sector Terminals</h3>

            <div class="w-full max-w-6xl mx-auto mb-10">
                <div class="w-full h-[800px] border-4 rounded-xl shadow-2xl overflow-hidden">
                    <iframe
                        id="vault-frame"
                        src="vault-master.html"
                        class="w-full h-full rounded-xl"
                        frameborder="0"
                        title="VaultMaster Terminal"
                        sandbox="allow-scripts allow-same-origin allow-forms"
                    ></iframe>
                </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                <button onclick="loadTerminal('vault-master.html')" class="terminal-btn p-6">ðŸ¦ VaultMaster Terminal</button>
                <button onclick="loadTerminal('cube-lattice.html')" class="terminal-btn p-6">ðŸ§± Cube Lattice GPT</button>
                <button onclick="loadTerminal('global-view.html')" class="terminal-btn p-6">ðŸŒ Global View GPT</button>
                <button onclick="loadTerminal('freight-ops.html')" class="terminal-btn p-6">ðŸšš Freight Ops GPT</button>
                <button onclick="loadTerminal('loop-watch.html')" class="terminal-btn p-6">â™»ï¸ Loop Watch GPT</button>
                <button onclick="loadTerminal('seedwave.html')" class="terminal-btn p-6">ðŸŒ± Seedwave GPT</button>
                <button onclick="loadTerminal('distribution.html')" class="terminal-btn p-6">ðŸ“¦ Distribution GPT</button>
                <button onclick="loadTerminal('signal.html')" class="terminal-btn p-6">ðŸ” Signal GPT</button>
                <button onclick="loadTerminal('faa-brands.html')" class="terminal-btn p-6">ðŸ“¦ 7038 FAA Brands</button>
            </div>
        </section>

        <section class="py-16 px-6 text-center sector-scrolls-section">
            <h2 class="text-4xl font-bold mb-8">ðŸ§¬ Sector Scrolls</h2>
            <div id="sector-glyphs-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-w-6xl mx-auto">
            </div>
            <div id="sector-content-container" class="mt-10 px-6 max-w-6xl mx-auto"></div>
        </section>

        <section id="treaty" class="py-16 px-6 text-center">
            <h2 class="text-4xl font-bold mb-6">ðŸ“œ Treaty Systemâ„¢</h2>
            <p class="max-w-2xl mx-auto text-lg mb-8">The FAA.zoneâ„¢ Treaty Layer binds interface to intention. This is not UI. This is glyph-encoded law.</p>
            <blockquote class="text-2xl italic font-semibold">"FAA.zoneâ„¢ isn't a site. It's the shape of alignment â€” and ðŸ¦ holds the flame."</blockquote>
        </section>

        <section class="py-10 text-xs text-center signal-packet-section">
            <pre class="max-w-2xl mx-auto p-4 rounded-lg overflow-auto"><code>{
    "signal": "omnidrop",
    "origin": "If you dont like the fruits you are growing, change the seedâ„¢ / FAA Vault Layer",
    "payload": {
        "type": "scroll",
        "value": "homepage + VaultRouter + all terminal iframe buttons live + Treaty Grid"
    }
}</code></pre>
        </section>

        <section id="vaultmesh" class="py-20 px-6">
            <div class="max-w-4xl mx-auto text-left space-y-6">

                <h2 class="text-4xl font-bold">ðŸ§  VaultMeshâ„¢: Executive Summary</h2>

                <p>VaultMeshâ„¢ is an intelligent data orchestration framework designed for the segmentation, synchronization, and secure deployment of high-value digital assetsâ€”referred to as scrollsâ€”across decentralized and permissioned networks such as FAA.zoneâ„¢.</p>

                <ul class="list-disc ml-6 space-y-2">
                    <li>Captures metadata-rich content streams (chats, code, brands, assets)</li>
                    <li>Assigns them to programmable claim structures (ScrollClaimsâ„¢)</li>
                    <li>Secures their lineage using OmniSignalâ„¢, PulseGridâ„¢, and GhostTraceâ„¢ layers</li>
                    <li>Enforces royalty logic, scroll integrity, and traceability on-chain and off-grid</li>
                </ul>

                <p>VaultMeshâ„¢ powers high-tier operations like HSOMNI9000â„¢, enabling Diamond-tier deployments, cross-sector scroll claims, and enterprise-scale content monetization with full compliance and provenance.</p>
                <p>The framework is deeply integrated with platforms such as <code class="bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400">vault.faa.zoneâ„¢</code>, where scrolls tied to brands like Fruitful Global Planetâ„¢ are securely hosted, organized into structured sectors, and deployed through FAA.zoneâ„¢-compliant channels.</p>
                <p>A critical operator in this ecosystem is HSOMNI9000â„¢, the certified scroll class which governs Diamond-tier logic, enforces 10â€“11% royalty triggers, and auto-deploys ScrollClaimsâ„¢ with real-time ClaimRootâ„¢ verification.</p>


                <h3 class="text-xl font-bold mt-10">ðŸ“– VaultMeshâ„¢ Index</h3>
                <ul class="list-decimal ml-6 space-y-2">
                    <li>Introduction to VaultMeshâ„¢</li>
                    <li>Core System Components</li>
                    <li>ScrollClaimâ„¢ Infrastructure</li>
                    <li>Data Flow and Claim Lifecycle</li>
                    <li>Tiering, Royalties, and Compliance</li>
                    <li>Integration with FAA.zoneâ„¢</li>
                    <li>Market Segments & Use Cases</li>
                    <li>Revenue Streams & Monetization</li>
                    <li>Technology Roadmap</li>
                    <li>Team & Governance</li>
                </ul>

                <!-- Section for VaultMesh Index Snapshots -->
                <div class="mt-10 pt-8 border-t border-border-color-light dark:border-border-color-dark">
                    <h3 class="text-xl font-bold mb-4">ðŸ“š VaultMesh Index Snapshots</h3>
                    <p class="text-sm text-muted-text-light mb-4">Click on each section to expand its detailed snapshot.</p>
                    <button id="loadVaultMeshIndexSnapshotsBtn" class="action-button mb-4">
                        <i class="fas fa-list-alt mr-2"></i> Load Index Snapshots
                    </button>
                    <div id="vaultMeshIndexContainer" class="space-y-4">
                        <!-- Snapshots will be loaded here dynamically -->
                    </div>
                </div>

                <!-- Existing VaultMesh Status Snapshot button moved to the bottom of the section -->
                <div class="mt-10 pt-8 border-t border-border-color-light dark:border-border-color-dark">
                    <h3 class="text-xl font-bold mb-4">ðŸ“ˆ VaultMesh Status Snapshot</h3>
                    <p class="text-sm text-muted-text-light mb-4">Get a real-time overview of key VaultMesh operational metrics.</p>
                    <button id="getSnapshotBtn" class="action-button">
                        <i class="fas fa-camera mr-2"></i> Get Live Status Snapshot
                    </button>
                    <div id="vaultMeshSnapshotOutput" class="mt-4 p-4 rounded-lg bg-gray-100 dark:bg-card-bg-dark text-left text-sm hidden">
                        <!-- Status Snapshot content will be dynamically inserted here -->
                    </div>
                </div>

            </div>
        </section>

        <section id="admin-global-dashboard" class="admin-portal-container admin-view-panel hidden">
            <header>
                <h2 class="dashboard-header-h2">ðŸ“Š FAAâ„¢ Global Ecosystem - Interactive Dashboard</h2>
                <p class="dashboard-header-p mt-1">A real-time operational overview of the entire FAAâ„¢ Global Ecosystem.</p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="dashboard-metric-card">
                    <h3>Total Brands</h3>
                    <p id="dashboard-metric-total-brands">7,038</p>
                </div>
                <div class="dashboard-metric-card">
                    <h3>Core Brands</h3>
                    <p id="dashboard-metric-core-brands">168</p>
                </div>
                <div class="dashboard-metric-card">
                    <h3>Product Nodes</h3>
                    <p id="dashboard-metric-total-nodes">~700</p>
                </div>
                <div class="dashboard-metric-card">
                    <h3>Total Pages</h3>
                    <p id="dashboard-metric-total-pages">780+</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <div class="lg:col-span-2 dashboard-metric-card">
                    <h3 class="dashboard-header-h2">Ecosystem Pulse Monitor</h3>
                    <p class="dashboard-header-p mb-4">Simulated real-time signal activity across key sectors.</p>
                    <div class="chart-container chart-options-default">
                        <canvas id="globalPulseChart"></canvas>
                    </div>
                </div>
                <div class="dashboard-metric-card">
                    <h3 class="dashboard-header-h2">Brand Distribution</h3>
                    <p class="dashboard-header-p mb-4">Core brands by primary sector.</p>
                    <div class="chart-container chart-container-doughnut chart-options-default">
                        <canvas id="brandDistributionChart"></canvas>
                    </div>
                </div>
            </div>

            <h3 class="dashboard-header-h2 mb-4">âš™ï¸ Technology Stack Blueprint</h3>
            <p class="dashboard-header-p mb-8">An interactive overview of the core infrastructure powering the FAAâ„¢ ecosystem. Click each pillar for details.</p>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center mb-8">
                <div class="tech-pillar" data-content="tech-vercel" style="border-top-color: #000;">
                    <h3>Vercel</h3>
                    <p>Frontend & Serverless</p>
                </div>
                <div class="tech-pillar" data-content="tech-cloudflare" style="border-top-color: #f97316;">
                    <h3>Cloudflare</h3>
                    <p>DNS, Edge & Security</p>
                </div>
                <div class="tech-pillar" data-content="tech-zoho" style="border-top-color: #ef4444;">
                    <h3>Zoho</h3>
                    <p>Email & Business APIs</p>
                </div>
                <div class="tech-pillar" data-content="tech-hetzner" style="border-top-color: #3b82f6;">
                    <h3>Hetzner</h3>
                    <p>Backend & Storage</p>
                </div>
            </div>

            <div id="tech-stack-content" class="tech-stack-content-container bg-white p-8 rounded-lg shadow-sm min-h-[300px] mb-8">
                <p class="text-center text-slate-500">Click a technology pillar above to see its details.</p>
            </div>

            <h3 class="dashboard-header-h2 mb-4">ðŸ™ï¸ Ecosystem Explorer</h3>
            <p class="dashboard-header-p mb-8">Explore the 29 defined sectors and their core brands within the FAAâ„¢ Global Supply Chain Grid.</p>

            <div class="dashboard-metric-card mb-8">
                <label for="sector-filter" class="font-semibold text-slate-700">Filter by Sector:</label>
                <select id="sector-filter" class="mt-2 block w-full md:w-1/3 p-2 border border-slate-300 rounded-md">
                    </select>
            </div>

            <div id="explorer-content" class="space-y-6 mb-8">
                </div>

            <h3 class="dashboard-header-h2 mb-4">ðŸ“œ Sovereign Scrolls Generator</h3>
            <p class="dashboard-header-p mb-8">Monitoring the status of the automated static page generation engine.</p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="dashboard-metric-card">
                    <h3 class="dashboard-header-h2">Generation Progress</h3>
                    <div class="progress-bar-container">
                        <div id="progress-bar" class="progress-bar">0%</div>
                    </div>
                    <div class="flex justify-between text-sm mt-2">
                        <span id="pages-generated">0 Generated</span>
                        <span id="pages-total">0 Total</span>
                    </div>
                    <p class="text-sm text-slate-600 mt-4">The `html-page-generator.py` module is the robust bedrock of the Sovereign Scrolls vision, architecting digital autonomy at an unprecedented scale.</p>
                </div>
                <div class="dashboard-metric-card">
                    <h3 class="dashboard-header-h2">Future Focus</h3>
                    <ul class="list-disc list-inside space-y-2 text-slate-600">
                        <li>Integrate seamlessly with the Flask Backend (`app.py`) for real-time data persistence.</li>
                        <li>Enhance Admin Portal (`admin-portal.html`) for intuitive seed data input and deployment previews.</li>
                        <li>Automate the full CI/CD pipeline for the massive volume of static pages via Vercel.</li>
                    </ul>
                </div>
            </div>

            <h3 class="dashboard-header-h2 mb-4">ðŸ” License & Clause Ledger</h3>
            <p class="dashboard-header-p mb-8">An overview of the FAAâ„¢ licensing matrix and binding legal protocols.</p>

            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8">
                <div class="ledger-metric-card">
                    <h3>Tier 1 (Retail)</h3>
                    <p>1,204</p>
                </div>
                <div class="ledger-metric-card">
                    <h3>Tier 2 (GovMesh)</h3>
                    <p>880</p>
                </div>
                <div class="ledger-metric-card">
                    <h3>Tier 3 (Enterprise)
                    <p>734</p>
                </div>
                <div class="ledger-metric-card">
                    <h3>Tier 4 (Experimental)
                    <p>289</p>
                </div>
                <div class="ledger-metric-card">
                    <h3>Tier 5 (Dormant)</h3>
                    <p>181</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="dashboard-metric-card">
                    <h3 class="dashboard-header-h2">License Tier Growth (Last 6 Months)</h3>
                    <div class="chart-container chart-container-bar chart-options-default">
                        <canvas id="tierGrowthChart"></canvas>
                    </div>
                </div>
                <div class="dashboard-metric-card">
                    <h3 class="dashboard-header-h2">License Clause Allocation</h3>
                    <div class="chart-container chart-container-doughnut chart-options-default">
                        <canvas id="clauseAllocationChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        <section id="about" class="py-16 md:py-24 px-6 md:px-12 text-center">
            <div class="max-w-4xl mx-auto">
                <h3 class="text-4xl font-bold mb-8">About Fruitful Innovations</h3>
                <p class="text-lg leading-relaxed mb-6">
                    At Fruitful, we believe in a future where technology empowers positive change. Our platform is designed to break down traditional barriers, fostering a collaborative ecosystem where businesses and individuals can thrive while making a meaningful impact on the world.
                </p>
                <p class="text-lg leading-relaxed">
                    We are committed to transparency, sustainability, and innovation, driven by a powerful AI that ensures fairness, efficiency, and personalized experiences for every user. Join us in building a more fruitful planet.
                </p>
            </div>
        </section>

        <section id="cta" class="py-16 md:py-24 px-6 md:px-12 text-center">
            <div class="max-w-3xl mx-auto">
                <h3 class="text-4xl font-extrabold mb-8 leading-tight">
                    Ready to Transform Your Future?
                </h3>
                <p class="text-xl mb-10">
                    Join the Fruitful community today and start your journey towards innovation, connection, and a sustainable tomorrow.
                </p>
                <a href="#" class="cta-button">
                    Sign Up Now
                </a>
            </div>
        </section>

        <footer class="py-8 px-6 md:px-12 text-center">
            Â© 2025 FAAâ„¢ Treaty Systemâ„¢. All Rights Reserved. Powered by ðŸ¦ glyphs + Vault API. Synced with Seedwaveâ„¢.
        </footer>
    </main>

    <script>
        // --- ALL API KEYS (as requested by user) ---
        // Note: For production environments, it is strongly recommended to manage API keys securely
        // on a backend server or through environment variables, rather than embedding them directly
        // in client-side code. This is done here based on explicit user instruction.
        const PAYPAL_SDK_KEY = "BAAGdPecRsf6dw_nIrWqUen0GdW0UsBZapp1Gn62xkPdD-Vqc-4lqWAidKK8LOObXux8pHJGjXknZoar6Q";
        const PAYPAL_HOSTED_BUTTON_STARTER = "EMWGPGHNN8Y8E";
        const PAYPAL_HOSTED_BUTTON_PRO = "QGU3ZUQCMD49Q";
        const PAYPAL_HOSTED_BUTTON_ENTERPRISE = "9C88S44F93M5J";
        const PAYPAL_HOSTED_BUTTON_BANIMAL_PLACEHOLDER = "YOUR_BANIMAL_PAYPAL_BUTTON_ID_HERE";
        const GOOGLE_MAPS_API_KEY = "AIzaSyBPG8dG29cl0TvYRGyLozejGed5Wj5Ab80";
        const SPOTIFY_ACCESS_TOKEN = "BQBDSZ232IQmSLVbROkxqNMoGhtitKOJBjDzE-Lu9YKsSK1RKVwXNfYfncP2wf6Fj6xcYlnGD75baEqOmd3XtxhU...";
        const GEMINI_AI_API_KEY = "AIzaSyBGSDZATtITv5iIoB3rgKHBpWx9MrufxXE";
        const XERO_CLIENT_ID = "81B3573D453040508996432C5DAD565B";
        const XERO_CLIENT_SECRET = "FIaJGmsaCcKR3Z8kWxPnQd04EhYy2_bImPmoitQDP1U6Smaq";
        const XERO_REDIRECT_URI = "https://seedwave.faa.zone/admin_panel_xero.html";
        const XERO_WEBHOOK_KEY = "2fd5LQV0TQDI3572Er/sg66zqEbl8mFWRyfX3XkoKFZGRLK2cZPGpWV/j4yMTU7aUpbgBCfeZkuHnQIwD/0igw==";


        // --- Centralized Data Store for ALL dashboards and admin functions ---
        const appData = {
            // Data for Fruitful portal sections (existing)
            fruitful: {
                sharePrice: { value: 88.88, timestamp: new Date().toLocaleTimeString() },
                brandGrowth: {
                    labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                    data: [3, 7, 13, 21]
                },
                sectorMap: {
                    payroll: '/sectors/payroll/index.html', retail: '/sectors/retail/index.html',
                    'ai-logic': '/sectors/ai-logic/index.html', design: '/sectors/design/index.html',
                    finance: '/sectors/finance/index.html', webless: '/sectors/webless/index.html',
                    logistics: '/sectors/logistics/index.html', food: '/sectors/food/index.html',
                    education: '/sectors/education/index.html', health: '/sectors/health/index.html',
                    culture: '/sectors/culture/index.html', housing: '/sectors/housing/index.html',
                    nft: '/sectors/nft/index.html', media: '/sectors/media/index.html',
                    mining: '/sectors/mining/index.html', wildlife: '/sectors/wildlife/dashboard.html'
                },
                mockScrollProfiles: {
                    media: {
                        VisualPulse: { title: "VisualPulseâ„¢ Media Scroll", intro: "Advanced visual content orchestration with real-time rendering.", features: ["4K Streaming", "AI-driven Editing", "Dynamic Watermarking"], pricing: ["Tier 1: $50/month", "Tier 2: $150/month"], metadata: { id: "VP-001", vault: "MediaVault", layer: "Visual", bg: "bg-blue-900", height: "700px", width: "2770px" } },
                        SonicScape: { title: "SonicScapeâ„¢ Audio Scroll", intro: "Immersive audio experience with spatial sound design.", features: ["3D Audio Engine", "Adaptive Soundtracks", "Noise Cancellation"], pricing: ["Basic: $30/month", "Premium: $90/month"], metadata: { id: "SS-001", vault: "MediaVault", layer: "Audio", bg: "bg-purple-900", height: "700px", width: "2770px" } }
                    }
                },
                sectorList: {
                    "agriculture": "ðŸŒ± Agriculture & Biotech", "fsf": "ðŸ¥¦ Food, Soil & Farming",
                    "banking": "ðŸ¦ Banking & Finance", "creative": "ðŸ–‹ï¸ Creative Tech",
                    "logistics": "ðŸ“¦ Logistics & Packaging", "education": "ðŸ“š Education & IP",
                    "fashion": "âœ‚ Fashion & Identity", "gaming": "ðŸŽ® Gaming & Simulation",
                    "health-hygiene": "ðŸ§´ Health & Hygiene", "housing": "ðŸ›ï¸ Housing & Infrastructure",
                    "justice": "âš– Justice & Ethics", "knowledge": "ðŸ§  Knowledge & Archives",
                    "micromesh": "â˜° Micro-Mesh Logistics", "media": "ðŸŽ¬ Motion, Media & Sonic",
                    "nutrition": "âœ¿ Nutrition & Food Chain", "packaging": "ðŸ“¦ Packaging & Materials",
                    "quantum": "âœ´ï¸ Quantum Protocols", "ritual": "â˜¯ Ritual & Culture",
                    "saas": "ðŸ”‘ SaaS & Licensing", "trade": "ðŸ§º Trade Systems",
                    "utilities": "ðŸ”‹ Utilities & Energy", "voice": "ðŸŽ™ï¸ï¸ Voice & Audio",
                    "webless": "ðŸ“¡ Webless Tech & Nodes", "nft": "ðŸ” NFT & Ownership",
                    "zerowaste": "â™»ï¸ Zero Waste", "professional": "ðŸ§¾ Professional Services",
                    "ai-logic": "ðŸ§  AI, Logic & Grid Systems", "mining": "â›ï¸ Mining & Resources",
                    "payroll": "ðŸ’° Payroll Core Systems", "wildlife": "ðŸš Wildlife Sector",
                    "admin": "âš™ï¸ Admin & Manual Sync Panel", "global-index": "ðŸŒ Global Brand Index"
                },
            },
            // Data for Admin Portal sections (existing + new Baobab Global Dashboard)
            admin: {
                sectors: {
                    "ai-logic": { name: "ðŸ§  AI, Logic & Grid", brands: ["OmniAI", "GridSync"], nodes: ["AI Core", "Neural Net", "Data Mesh"] },
                    "creative": { name: "ðŸ–‹ï¸ Creative Tech", brands: ["PixelFlow", "SonicWave"], nodes: ["Render Engine", "Audio Synth"] },
                    "logistics": { name: "ðŸ“¦ Logistics & Packaging", brands: ["CrateLogic", "PackChain", "SortFleet", "RouteMesh", "LogiStack"], nodes: ["GPS Tracker", "Fleet Manager"] },
                    "education-ip": { name: "ðŸ“š Education & IP", brands: ["EduNest", "FormFlex"], nodes: ["Curriculum Builder", "License Tracker"] },
                    "fashion": { name: "âœ‚ï¸ Fashion & Identity", brands: ["StyleSync", "FabricFlow"], nodes: ["Design Studio", "Material Trace"] },
                    "gaming": { name: "ðŸŽ® Gaming & Simulation", brands: ["GameForge", "SimulateX"], nodes: ["Physics Engine", "Render Farm"] },
                    "health": { name: "ðŸ§  Health & Hygiene", brands: ["MedVault", "CleanCast"], nodes: ["Diagnostic AI", "Patient Portal"] },
                    "housing": { name: "ðŸ—ï¸ Housing & Infrastructure", brands: ["EcoBuild", "SmartHomeOS"], nodes: ["Modular Design", "Energy Monitor"] },
                    "justice": { name: "âš– Justice & Ethics", brands: ["LawLedger", "EthicShield"], nodes: ["Case Tracker", "Compliance Bot"] },
                    "knowledge": { name: "ðŸ“– Knowledge & Archives", brands: ["InfoVault", "ArchiveFlow"], nodes: ["Knowledge Graph", "Document Index"] },
                    "micromesh": { name: "â˜° Micro-Mesh Logistics", brands: ["MicroLogix", "NanoRoute"], nodes: ["Tiny Package", "Drone Delivery"] },
                    "media": { name: "ðŸŽ¬ Motion, Media & Sonic", brands: ["VisualPulse", "SonicScape"], nodes: ["Video Editor", "Audio Mixer"] },
                    "nutrition": { name: "âœ¿ Nutrition & Food Chain", brands: ["NutriFlow", "FarmTrack"], nodes: ["Recipe Optimizer", "Crop Monitor"] },
                    "packaging": { brands: ["PackSmart", "EcoWrap"], nodes: ["Material Optimizer", "Recycle Trace"] },
                    "quantum": { brands: ["QuantumLink", "EntangleOS"], nodes: ["Qubit Manager", "Secure Comm"] },
                    "ritual": { brands: ["AuraFlow", "SpiritWeave"], nodes: ["Ceremony Guide", "Community Hub"] },
                    "saas": { brands: ["CloudFlow", "AppStack"], nodes: ["Subscription Manager", "API Gateway"] },
                    "trade": { brands: ["TradeLink", "MarketPulse"], nodes: ["Supply Chain", "Demand Predictor"] },
                    "utilities": { brands: ["PowerGrid", "WaterFlow"], nodes: ["Smart Meter", "Resource Opt"] },
                    "voice": { brands: ["VoiceSynth", "AudioSense"], nodes: ["Speech Rec", "Sound Analysis"] },
                    "webless": { brands: ["MeshNode", "OffGridLink"], nodes: ["Decentral Node", "Secure Tunnel"] },
                    "nft": { brands: ["ArtChain", "TokenForge"], nodes: ["Minting Platform", "Royalty Engine"] },
                    "education-youth": { brands: ["KidGenius", "FutureLearn"], nodes: ["Interactive Lessons", "Skill Tracker"] },
                    "zerowaste": { brands: ["RecycleFlow", "CompostGen"], nodes: ["Waste Sorter", "Bio-Digester"] },
                    "professional": { brands: ["ProServe", "ConsultHub"], nodes: ["Client Manager", "Project Tracker"] },
                    "payroll-mining": { brands: ["MinePay", "CryptoLedger"], nodes: ["Payroll Automator", "Mining Pool"] },
                    "wildlife": { brands: ["WildGuard", "EcoSense"], nodes: ["Animal Tracker", "Habitat Monitor"] },
                    "food-soil-farming": { name: "ðŸ¥¦ Food, Soil & Farming", brands: ["FarmFlow", "SoilSense"], nodes: ["Crop Yield Monitor", "Soil Health Analyzer"] },
                    "agriculture-biotech": { name: "ðŸŒ¾ Agriculture & Biotech", brands: ["BioCrop", "GeneHarvest"], nodes: ["Biotech Lab", "Seed Registry"] },
                    "banking-finance": { name: "ðŸ¦ Banking & Finance", brands: ["CoinFlow", "LedgerPro"], nodes: ["Transaction Monitor", "Smart Contract Auditor"] }
                },
                // Baobab Global Dashboard Data
                globalMetrics: {
                    totalBrands: 7038,
                    coreBrands: 168,
                    totalNodes: 700,
                    totalPages: 780,
                    activeVaults: 12,
                    totalScrollClaims: 25000,
                    networkHealth: 98.7
                },
                brandDistribution: {
                    labels: ['Finance', 'Logistics', 'Health', 'Education', 'Agriculture', 'AI', 'Other'],
                    data: [25, 22, 18, 15, 13, 11, 64]
                },
                sovereignScrolls: {
                    generated: 1171,
                    total: 7038,
                },
                techStack: {
                    'tech-vercel': {
                        title: 'Vercel: Frontend & Serverless',
                        icon: 'ðŸš€',
                        details: 'Vercel is the primary Continuous Deployment platform, connecting to GitHub to build and deploy all FAA.zone web projects. It handles static frontend assets and dynamic Node.js serverless functions, enabling rapid, scalable, and automated deployments.',
                        features: ['Automatic Deployments from Git', 'Scalable Serverless Functions', 'Custom Domain Management', 'Secure Environment Variables', 'Instant Preview Deployments']
                    },
                    'tech-cloudflare': {
                        title: 'Cloudflare: DNS, Edge & Security',
                        icon: 'â˜ï¸',
                        details: 'Cloudflare acts as the global performance and security layer. It manages all DNS routing and protects the ecosystem with its WAF, DDoS mitigation, and global CDN, ensuring high availability and fast load times worldwide.',
                        features: ['Global CDN Caching', 'Authoritative DNS Management', 'Web Application Firewall (WAF)', 'Universal SSL/TLS Encryption', 'Cloudflare Workers (Edge Computing)']
                    },
                    'tech-zoho': {
                        title: 'Zoho: Email & Business APIs',
                        icon: 'âœ‰ï¸',
                        details: 'Zoho serves as the central nervous system for business operations. It handles all corporate email via Zoho Mail and provides a rich suite of APIs (CRM, Books, Forms) for automating client management, billing, and communication workflows.',
                        features: ['Enterprise Email Hosting (SMTP)', 'OAuth 2.0 for Authentication', 'CRM and Forms API for Data Sync', 'DMARC, SPF, DKIM for Email Security', 'Centralized User Management']
                    },
                    'tech-hetzner': {
                        title: 'Hetzner: Backend & Storage',
                        icon: 'ðŸ’¾',
                        details: 'Hetzner provides the foundational layer for persistent data, heavy computation, and specialized backend services. It offers cost-effective, high-performance dedicated resources that complement the serverless architecture.',
                        features: ['Dedicated Cloud Servers', 'Persistent Block Storage Volumes', 'Scalable Object Storage', 'Private Networks & Firewalls', 'Load Balancers for High Availability']
                    }
                },
                licenseLedger: {
                    growth: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [
                            { label: 'Tier 1 - Retail', data: [120, 140, 155, 178, 190, 204], borderColor: '#4f46e5', tension: 0.3, backgroundColor: 'rgba(79, 70, 229, 0.1)' },
                            { label: 'Tier 2 - GovMesh', data: [75, 89, 94, 102, 110, 117], borderColor: '#10b981', tension: 0.3, backgroundColor: 'rgba(16, 185, 129, 0.1)' },
                            { label: 'Tier 3 - Enterprise', data: [62, 64, 70, 73, 78, 80], borderColor: '#f97316', tension: 0.3, backgroundColor: 'rgba(249, 115, 22, 0.1)' }
                        ]
                    },
                    clauses: {
                        labels: ['IP Clause 14A', 'Sovereign Export A3', 'Experimental Tag X7', 'Tier-Sync Accord', 'VaultMesh Override'],
                        data: [722, 519, 312, 455, 188]
                    }
                },
                // Mock data for the pulse chart (admin section)
                pulseChartData: {
                    labels: Array.from({length: 30}, (_, i) => `Day ${i + 1}`),
                    datasets: [
                        {
                            label: 'Sync Success Rate (%)',
                            data: Array.from({length: 30}, () => Math.floor(Math.random() * 20) + 80), // 80-100%
                            borderColor: '#0071e3', // Apple blue
                            backgroundColor: 'rgba(0, 113, 227, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'New Node Registrations',
                            data: Array.from({length: 30}, () => Math.floor(Math.random() * 10) + 5), // 5-15 nodes
                            borderColor: '#30d158', // Apple green
                            backgroundColor: 'rgba(48, 209, 88, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                }
            }
        };

        // VaultMesh Index Sections (consolidated from the provided text)
        const vaultMeshSections = [
            {
                title: "1. Introduction to VaultMeshâ„¢",
                content: "VaultMeshâ„¢ transforms disorganized digital content into claimable, trackable assets. It bridges enterprise content systems, decentralized data vaults, and monetization layers through FAA-compliant infrastructure."
            },
            {
                title: "2. Core System Components",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>VaultDNAâ„¢: Immutable identifiers for scroll content</li>
                        <li>ClaimRootâ„¢: Origin anchor & timestamp</li>
                        <li>ScrollClaimâ„¢ Contracts: Programmable wrappers</li>
                        <li>PulseGridâ„¢ Sync: Real-time scroll presence & sync</li>
                        <li>OmniSignalâ„¢: Global scroll verification</li>
                        <li>GhostTraceâ„¢ Gen2: Scroll interaction backtrace</li>
                    </ul>
                `
            },
            {
                title: "3. ScrollClaimâ„¢ Infrastructure",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>Set tier access (e.g., Diamond)</li>
                        <li>Define royalty logic (10â€“11%)</li>
                        <li>Lock scrolls with PulseGridâ„¢ sync and OmniSignalâ„¢</li>
                        <li>Deploy via FAA.zoneâ„¢ with compliant ZIP bundles</li>
                    </ul>
                `
            },
            {
                title: "4. Data Flow and Claim Lifecycle",
                content: `
                    <ul class="list-decimal pl-6 space-y-1">
                        <li>Ingest â€” content enters VaultMeshâ„¢</li>
                        <li>Encode â€” metadata & VaultDNAâ„¢ attached</li>
                        <li>Wrap â€” ScrollClaimâ„¢ smart-wrapped</li>
                        <li>Deploy â€” FAA.zoneâ„¢ push (ZIP, manifest, HTML)</li>
                        <li>Sync â€” PulseGridâ„¢ status & OmniSignalâ„¢ locked</li>
                        <li>Enforce â€” Royalties, access & scroll activity logged via GhostTraceâ„¢</li>
                    </ul>
                `
            },
            {
                title: "5. Tiering, Royalties, and Compliance",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>Diamond Tier: 10â€“11% royalty enforced</li>
                        <li>SmartWallet Integration: ScrollClaimâ„¢ payments and transfers</li>
                        <li>VaultPayâ„¢ Tier III: Required for commercial deployments</li>
                        <li>Compliance: FAA scroll ID, ClaimRootâ„¢ hash, and royalty schema</li>
                    </ul>
                `
            },
            {
                title: "6. Integration with FAA.zoneâ„¢",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>Native support for /public/diamond/ structure</li>
                        <li>ZIP, HTML, Manifest deployment bundles</li>
                        <li>ClaimRootâ„¢ timestamp validation</li>
                        <li>Seamless PulseGridâ„¢ auto-sync for live claim state</li>
                        <li>Brand hosting via vault.faa.zoneâ„¢</li>
                    </ul>
                `
            },
            {
                title: "7. Market Segments & Use Cases",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>GPT Conversations & Expert Threads</li>
                        <li>Knowledge/Training Archives</li>
                        <li>Creative IP Scrolls (music, literature, visuals)</li>
                        <li>GeoSector Deployment Archives</li>
                        <li>Enterprise Scroll Logs & Audit Trails</li>
                    </ul>
                `
            },
            {
                title: "8. Revenue Streams & Monetization",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>Diamond Royalties (10â€“11%)</li>
                        <li>Scroll Packaging Fees</li>
                        <li>VaultMeshâ„¢ API Subscriptions</li>
                        <li>PulseGridâ„¢ and OmniSignalâ„¢ Licensing</li>
                    </ul>
                `
            },
            {
                title: "9. Technology Roadmap",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>Q2 2025: ScrollClaimâ„¢ v2.2 with multi-claim staking</li>
                        <li>Q3 2025: GhostTraceâ„¢ Gen3 with forensic backtrace tooling</li>
                        <li>Q4 2025: Autonomous AI Sector Agents</li>
                        <li>Q1 2026: Inter-vault Federation</li>
                    </ul>
                `
            },
            {
                title: "10. Team & Governance",
                content: `
                    <ul class="list-disc pl-6 space-y-1">
                        <li>FAA-certified engineers (scroll claimers)</li>
                        <li>Scroll Ministers: Compliance + tiering</li>
                        <li>Vault Admins: Metadata + ClaimRootâ„¢ enforcement</li>
                        <li>HSOMNI9000â„¢ Operators: Diamond-tier execution agents</li>
                    </ul>
                `
            }
        ];


        // --- Rhythmic Canvas Glyph Drawing Logic (Hero Background) ---
        const canvas = document.getElementById('rhythmicCanvas');
        const ctx = canvas ? canvas.getContext('2d') : null;
        let animationFrameId;

        function resizeCanvas() {
            if (!canvas) return;
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            // Adjust base size for more organic shapes
            if (canvas.width < 300) canvas.width = 300;
            if (canvas.height < 150) canvas.height = 150;
            // No lineAmplitude needed as we're drawing branches
        }

        // Branching tree/root drawing variables and function
        let angleOffset = 0;
        const branchSpeed = 0.005; // Speed of growth
        let branches = [];
        const maxBranches = 2500; // Significantly increased for 1000+ routes
        const initialBranchLength = 30; // Starting length of branches
        const branchShrinkFactor = 0.75; // How much smaller each new branch is
        const minBranchLength = 1; // Stop drawing when branches get too small
        const maxDepth = 6; // Increased depth for more complexity

        class Branch {
            constructor(startX, startY, angle, length, depth, baseHue, parentBranch = null) {
                this.startX = startX;
                this.startY = startY;
                this.angle = angle;
                this.length = length;
                this.depth = depth;
                this.baseHue = baseHue; // Base hue for this branch's "family"
                this.endX = startX + Math.cos(angle) * length;
                this.endY = startY + Math.sin(angle) * length;
                this.currentLength = 0;
                this.parent = parentBranch;
                this.pulseOffset = Math.random() * Math.PI * 2; // Unique pulse offset for each branch
                this.id = Math.random(); // Unique ID for potential selective pulsing
            }

            draw(ctx, globalTime) {
                if (!ctx) return;

                // Calculate pulse for this branch
                const pulseIntensity = (Math.sin(globalTime * 2 + this.pulseOffset) * 0.5 + 0.5); // 0 to 1
                let actualLength = this.length; // No per-branch growth, all grow with overall animation

                ctx.beginPath();
                ctx.moveTo(this.startX, this.startY);
                ctx.lineTo(this.startX + Math.cos(this.angle) * actualLength, this.startY + Math.sin(this.angle) * actualLength);

                // Earthy tones for base branches, with subtle glow/pulse for "sap" or "energy"
                let hue = (this.baseHue + this.depth * 5) % 360; // Hue varies slightly with depth
                let saturation = 50 - this.depth * 5; // Less saturated deeper
                let lightness = 20 + this.depth * 3; // Lighter deeper

                // Add a glowing effect to certain "sap" points or along the branches
                const glowStrength = 0.5 + pulseIntensity * 0.5; // Stronger glow when pulsing
                let color = `hsla(${hue}, ${saturation}%, ${lightness}%, ${0.7 + pulseIntensity * 0.3})`;

                ctx.strokeStyle = color;
                ctx.lineWidth = Math.max(0.5, (maxDepth - this.depth + 1) * 1.5 * glowStrength); // Line width also pulses
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.stroke();

                // Optional: Draw a "nutrient" dot at the end of some branches if desired
                if (this.depth === maxDepth && Math.random() < 0.05) { // Only at max depth, small chance
                    ctx.beginPath();
                    ctx.arc(this.endX, this.endY, 2 * glowStrength, 0, Math.PI * 2);
                    ctx.fillStyle = `hsla(${this.baseHue + 120}, 80%, 70%, ${glowStrength})`; // A different color for nutrient
                    ctx.fill();
                }
            }
        }

        // Recursive function to generate branches
        function createBranch(x, y, angle, length, depth, baseHue, parentBranch = null) {
            if (depth > maxDepth || branches.length >= maxBranches || length < minBranchLength) return;

            const newBranch = new Branch(x, y, angle, length, depth, baseHue, parentBranch);
            branches.push(newBranch);

            if (depth < maxDepth) {
                const numSubBranches = Math.floor(Math.random() * 2) + 2; // 2 or 3 sub-branches
                for (let i = 0; i < numSubBranches; i++) {
                    const spread = (Math.random() - 0.5) * (Math.PI / 3); // Angle variation
                    const newAngle = angle + spread + (Math.sin(angleOffset * 0.5 + newBranch.id) * 0.1); // Dynamic subtle bend
                    const newLength = length * (branchShrinkFactor + (Math.random() - 0.5) * 0.1); // Slightly varied length
                    createBranch(newBranch.endX, newBranch.endY, newAngle, newLength, depth + 1, baseHue, newBranch);
                }
            }
        }

        // Main animation loop for Baobab roots
        function drawBaobabRoots() {
            if (!ctx) return;
            // Clear with a slight transparency to create a subtle "trail" effect
            ctx.fillStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            angleOffset += branchSpeed;

            // Trigger new root generation occasionally to maintain density or if branches thin out
            if (branches.length < maxBranches * 0.8 || Math.random() < 0.002) {
                const startX = Math.random() * canvas.width;
                const startY = canvas.height * (0.9 + Math.random() * 0.1); // Start from lower 10% of canvas
                const initialAngle = -Math.PI / 2 + (Math.random() - 0.5) * Math.PI / 4; // Mostly upwards, with spread
                createBranch(startX, startY, initialAngle, initialBranchLength * (0.8 + Math.random() * 0.4), 0, Math.random() * 360);
            }

            // Draw and update existing branches
            branches.forEach(branch => {
                branch.draw(ctx, angleOffset); // Pass global time for consistent pulsing
            });

            // Clean up old branches if too many
            if (branches.length > maxBranches * 1.2) {
                branches.splice(0, branches.length - maxBranches);
            }

            animationFrameId = requestAnimationFrame(drawBaobabRoots);
        }

        // Initial setup for the Baobab roots
        if (canvas) {
            window.addEventListener('load', () => {
                resizeCanvas();
                // Initial large roots to fill the space
                for (let i = 0; i < 5; i++) { // Generate 5 initial large roots/trees
                    const startX = canvas.width * (0.1 + i * 0.16); // Spread across the bottom
                    const startY = canvas.height * (0.95 + Math.random() * 0.05);
                    const initialAngle = -Math.PI / 2 + (Math.random() - 0.5) * Math.PI / 6;
                    createBranch(startX, startY, initialAngle, initialBranchLength * (2 + Math.random()), 0, Math.random() * 360);
                }
                drawBaobabRoots(); // Start the animation
            });
            window.addEventListener('resize', () => {
                cancelAnimationFrame(animationFrameId); // Stop previous animation loop
                resizeCanvas();
                branches = []; // Clear and re-initialize branches on resize
                for (let i = 0; i < 5; i++) {
                    const startX = canvas.width * (0.1 + i * 0.16);
                    const startY = canvas.height * (0.95 + Math.random() * 0.05);
                    const initialAngle = -Math.PI / 2 + (Math.random() - 0.5) * Math.PI / 6;
                    createBranch(startX, startY, initialAngle, initialBranchLength * (2 + Math.random()), 0, Math.random() * 360);
                }
                drawBaobabRoots(); // Restart animation
            });
        }


        // --- Core Application Initialization and Event Handling ---
        let charts = {}; // Global chart instances for proper management

        document.addEventListener('DOMContentLoaded', function() {
            // Initial setup for the entire page
            updateSharePrice(); // Call once immediately
            setInterval(updateSharePrice, 9000); // Then set interval
            setupAnnouncementBar();
            setupThemeToggle(); // Initialize theme toggle
            setupLanguageSelector(); // Initialize language selector
            updateHeaderPosition(); // Call this after announcement bar is potentially hidden/moved

            // Set up main navigation scroll spy
            setupGlobalNavScrollSpy();

            // Setup Admin Portal Specifics (only call if admin section is present)
            const adminPortalSection = document.getElementById('admin-portal-section');
            if (adminPortalSection) {
                populateAdminSectorSelect();
                loadBrandDashboard(appData.admin.sectors); // Pass initial data
                setupAdminNav();
                // No initial showAdminView call here unless an admin view is explicitly part of the main page load.
            }

            // Initialize brandChart if it exists on this page
            const brandChartCtx = document.getElementById('brandChart')?.getContext('2d');
            if (brandChartCtx) {
                new Chart(brandChartCtx, {
                    type: 'line',
                    data: {
                        labels: appData.fruitful.brandGrowth.labels,
                        datasets: [{
                            label: 'Treaty Brands Activated',
                            data: appData.fruitful.brandGrowth.data,
                            borderWidth: 2,
                            borderColor: '#0071e3',
                            tension: 0.4,
                            fill: true,
                            backgroundColor: 'rgba(0, 113, 227, 0.1)',
                            pointRadius: 4,
                            pointBackgroundColor: '#0071e3',
                            pointBorderColor: '#fff',
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'var(--border-color-light)',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: 'var(--muted-text-light)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'var(--border-color-light)',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: 'var(--muted-text-light)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    color: 'var(--text-color-light)'
                                }
                            }
                        }
                    }
                });
            }

            // Initialize the embedded Baobabe Terminal
            initBaobabeTerminal();

            // Initialize VaultMesh Snapshot Button
            const getSnapshotBtn = document.getElementById('getSnapshotBtn');
            if (getSnapshotBtn) {
                getSnapshotBtn.addEventListener('click', generateVaultMeshStatusSnapshot);
            }

            // Initialize VaultMesh Index Snapshots button
            const loadVaultMeshIndexSnapshotsBtn = document.getElementById('loadVaultMeshIndexSnapshotsBtn');
            if (loadVaultMeshIndexSnapshotsBtn) {
                loadVaultMeshIndexSnapshotsBtn.addEventListener('click', renderVaultMeshIndexSnapshots);
            }
        });

        // --- Announcement Bar Logic ---
        function setupAnnouncementBar() {
            const announcementBar = document.getElementById('announcement-bar');
            const closeBtn = announcementBar ? announcementBar.querySelector('.close-btn') : null;
            const header = document.querySelector('header.main-header');

            if (announcementBar && header) {
                const isDismissed = localStorage.getItem('announcementDismissed');
                if (isDismissed === 'true') {
                    announcementBar.classList.add('hidden');
                    header.style.top = '0px';
                } else {
                    const barHeight = announcementBar.offsetHeight;
                    header.style.top = `${barHeight}px`;

                    if (closeBtn) {
                        closeBtn.addEventListener('click', () => {
                            announcementBar.classList.add('hidden');
                            header.style.top = '0px';
                            localStorage.setItem('announcementDismissed', 'true');
                        });
                    }
                }
            }
        }

        // Adjust header top position if announcement bar is present and visible
        function updateHeaderPosition() {
            const announcementBar = document.getElementById('announcement-bar');
            const header = document.querySelector('header.main-header');
            if (announcementBar && header) {
                if (!announcementBar.classList.contains('hidden')) {
                    header.style.top = `${announcementBar.offsetHeight}px`;
                } else {
                    header.style.top = '0px';
                }
            }
        }

        // --- Global Main Navigation Scroll Spy ---
        function setupGlobalNavScrollSpy() {
            const navLinks = document.querySelectorAll('.nav-list a[href^="#"]');
            const sections = document.querySelectorAll('section[id], .innovate-connect-thrive-section[id]');

            const observerOptions = {
                root: null,
                rootMargin: '0px 0px -50% 0px',
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => link.classList.remove('active-nav-link'));
                        const currentSectionId = entry.target.id;
                        const correspondingNavLink = document.querySelector(`.nav-list a[href="#${currentSectionId}"]`);
                        if (correspondingNavLink) {
                            correspondingNavLink.classList.add('active-nav-link');
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });

            const initialHash = window.location.hash;
            if (initialHash) {
                const initialTargetLink = document.querySelector(`.nav-list a[href="${initialHash}"]`);
                if (initialTargetLink) {
                    navLinks.forEach(link => link.classList.remove('active-nav-link'));
                    initialTargetLink.classList.add('active-nav-link');
                }
            } else {
                const portalHomeLink = document.querySelector('.nav-list a[href="#innovate-connect-thrive"]');
                if (portalHomeLink) {
                    portalHomeLink.classList.add('active-nav-link');
                } else if (navLinks.length > 0) {
                    navLinks[0].classList.add('active-nav-link');
                }
            }

            navLinks.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href && href.length > 1 && href.startsWith('#')) {
                        e.preventDefault();
                        const targetElement = document.querySelector(href);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                            history.pushState(null, '', href);
                        }
                    }
                });
            });
        }


        // --- FAA Share Signal (mock price update) ---
        function updateSharePrice() {
            const mockPrice = (80 + Math.random() * 10).toFixed(2);
            const priceElement = document.getElementById('price');
            const timestampElement = document.getElementById('timestamp');
            if (priceElement) {
                priceElement.innerText = `$${mockPrice}`;
            }
            if (timestampElement) {
                timestampElement.innerText = new Date().toLocaleTimeString();
            }
        }

        // --- Vault Terminal Navigation Logic ---
        window.loadTerminal = function(url) {
            const vaultFrame = document.getElementById('vault-frame');
            if (vaultFrame) {
                vaultFrame.src = url;
            }
            document.querySelectorAll('.terminal-btn').forEach(btn => {
                const btnOnClickString = btn.getAttribute('onclick');
                if (btnOnClickString && btnOnClickString.includes(url)) {
                    btn.classList.add('ring');
                } else {
                    btn.classList.remove('ring');
                }
            });
            console.log("ðŸ§¬ Terminal loaded:", url);
        };

        // --- Sector Glyphs and Iframe Loading ---
        const sectorGlyphsContainer = document.getElementById('sector-glyphs-container');
        if (sectorGlyphsContainer) {
            sectorGlyphsContainer.innerHTML = '';
            const sortedSectorSlugs = Object.keys(appData.fruitful.sectorList).sort((a, b) => {
                const nameA = appData.fruitful.sectorList[a];
                const nameB = appData.fruitful.sectorList[b];
                if (a === 'admin' || a === 'global-index') return 1;
                if (b === 'admin' || b === 'global-index') return -1;
                return nameA.localeCompare(nameB);
            });

            sortedSectorSlugs.forEach(slug => {
                if (slug !== 'admin' && slug !== 'global-index') {
                    const display = appData.fruitful.sectorList[slug];
                    const fileName = (slug === 'wildlife') ? 'dashboard.html' : 'index.html';
                    const url = `/sectors/${slug}/${fileName}`;

                    const glyphLink = document.createElement('a');
                    glyphLink.href = url;
                    glyphLink.className = "glyph";
                    glyphLink.setAttribute('data-vault', slug);
                    glyphLink.innerHTML = display;

                    glyphLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        const clickedSectorSlug = e.currentTarget.getAttribute('data-vault');
                        const iframeUrl = `/sectors/${clickedSectorSlug}/${(clickedSectorSlug === 'wildlife' ? 'dashboard.html' : 'index.html')}`;
                        const sectorContentContainer = document.getElementById('sector-content-container');

                        if (iframeUrl) {
                            const loadingMessageText = appData.fruitful.sectorList[clickedSectorSlug] || clickedSectorSlug.charAt(0).toUpperCase() + clickedSectorSlug.slice(1).replace('-', ' ');
                            sectorContentContainer.innerHTML =
                                `<div class="text-gray-600 text-sm mb-2">ðŸ”„ Loading sector: ${loadingMessageText}...</div>
                                <iframe src="${iframeUrl}" class="w-full h-[900px] border-none rounded-xl bg-gray-100"></iframe>`;
                        } else {
                            sectorContentContainer.innerHTML =
                                `<div class="text-red-500 text-sm mb-2">Error: Sector URL not found for ${clickedSectorSlug}.</div>`;
                        }
                    });
                    sectorGlyphsContainer.appendChild(glyphLink);
                }
            });
        }


        // --- Admin Portal Specific Logic ---
        const adminNavLinks = document.querySelectorAll('.admin-nav-link');
        const adminViewPanels = document.querySelectorAll('.admin-view-panel');
        const adminStatusDiv = document.getElementById("adminStatus");
        let adminCharts = {};

        function showAdminView(viewId) {
            const targetPanel = document.getElementById(viewId);
            if (!targetPanel) {
                console.warn(`Attempted to show admin view '${viewId}', but element not found.`);
                return;
            }

            adminViewPanels.forEach(panel => {
                panel.classList.add('hidden');
            });
            targetPanel.classList.remove('hidden');

            adminNavLinks.forEach(link => {
                link.classList.remove('active');
            });
            const clickedAdminNavLink = document.querySelector(`.admin-nav-link[data-admin-view="${viewId}"]`);
            if (clickedAdminNavLink) {
                 clickedAdminNavLink.classList.add('active');
            }

            renderAdminCharts(viewId);
        }

        function renderAdminCharts(viewId) {
            for (const chartKey in adminCharts) {
                if (adminCharts[chartKey]) {
                    adminCharts[chartKey].destroy();
                    adminCharts[chartKey] = null;
                }
            }

            const chartDefaultOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: { size: 12, family: 'Inter' },
                            color: 'var(--muted-text-light)'
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { color: 'var(--muted-text-light)' },
                        grid: { color: 'var(--border-color-light)' }
                    },
                    x: {
                        ticks: { color: 'var(--muted-text-light)' },
                        grid: { display: false }
                    }
                }
            };

            if (viewId === 'admin-global-dashboard') {
                const globalPulseCtx = document.getElementById('globalPulseChart')?.getContext('2d');
                if (globalPulseCtx) {
                    charts.globalPulse = new Chart(globalPulseCtx, {
                        type: 'line',
                        data: appData.admin.pulseChartData,
                        options: { ...chartDefaultOptions, scales: { x: { ...chartDefaultOptions.scales.x, display: true } } }
                    });
                }

                const brandDistributionCtx = document.getElementById('brandDistributionChart')?.getContext('2d');
                if (brandDistributionCtx) {
                    charts.brandDistribution = new Chart(brandDistributionCtx, {
                        type: 'doughnut',
                        data: {
                            labels: appData.admin.brandDistribution.labels,
                            datasets: [{
                                label: 'Core Brands',
                                data: appData.admin.brandDistribution.data,
                                backgroundColor: ['#4f46e5', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#3b82f6', '#14b8a6'],
                                hoverOffset: 4
                            }]
                        },
                        options: { ...chartDefaultOptions, scales: { x: { display: false }, y: { display: false } } }
                    });
                }

                const tierGrowthCtx = document.getElementById('tierGrowthChart')?.getContext('2d');
                if (tierGrowthCtx) {
                    charts.tierGrowth = new Chart(tierGrowthCtx, {
                        type: 'bar',
                        data: appData.admin.licenseLedger.growth,
                        options: { ...chartDefaultOptions, scales: { x: { stacked: true }, y: { stacked: true } } }
                    });
                }

                const clauseAllocationCtx = document.getElementById('clauseAllocationChart')?.getContext('2d');
                if (clauseAllocationCtx) {
                    charts.clauseAllocation = new Chart(clauseAllocationCtx, {
                        type: 'polarArea',
                        data: {
                            labels: appData.admin.licenseLedger.clauses.labels,
                            datasets: [{
                                label: 'Clause Allocations',
                                data: appData.admin.licenseLedger.clauses.data,
                                backgroundColor: ['#4f46e5B3', '#10b981B3', '#f59e0bB3', '#ef4444B3', '#8b5cf6B3'],
                            }]
                        },
                        options: { ...chartDefaultOptions, scales: { r: { grid: { color: 'var(--border-color-light)' } } } }
                    });
                }

                document.getElementById('dashboard-metric-total-brands').textContent = appData.admin.globalMetrics.totalBrands.toLocaleString();
                document.getElementById('dashboard-metric-core-brands').textContent = appData.admin.globalMetrics.coreBrands.toLocaleString();
                document.getElementById('dashboard-metric-total-nodes').textContent = appData.admin.globalMetrics.totalNodes.toLocaleString();
                document.getElementById('dashboard-metric-total-pages').textContent = appData.admin.globalMetrics.totalPages.toLocaleString() + '+';

                setupTechStackInteraction();
                document.querySelector('.tech-pillar')?.click();

                populateEcosystemSectorFilter();
                displayEcosystemSectorInfo(document.getElementById('sector-filter')?.value || Object.keys(appData.admin.sectors)[0]);

                updateSovereignScrollsProgressBar();
            }
            else if (viewId === 'admin-signal-sync') {
                const pulseMonitorCtx = document.getElementById('pulseChart')?.getContext('2d');
                if (pulseMonitorCtx) {
                    charts.adminPulse = new Chart(pulseMonitorCtx, {
                        type: 'line',
                        data: appData.admin.pulseChartData,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'top',
                                    labels: {
                                        color: 'var(--muted-text-light)'
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: { color: 'var(--muted-text-light)' },
                                    grid: { color: 'var(--border-color-light)' }
                                },
                                x: {
                                    ticks: { color: 'var(--muted-text-light)' },
                                    grid: { display: false }
                                }
                            }
                        }
                    });
                }
            }
        }

        function setupAdminNav() {
            adminNavLinks.forEach(link => {
                link.removeEventListener('click', handleAdminNavLinkClick);
                link.addEventListener('click', handleAdminNavLinkClick);
            });
        }

        function handleAdminNavLinkClick(e) {
            e.preventDefault();
            const viewId = e.currentTarget.dataset.adminView;
            showAdminView(viewId);
        }

        function populateAdminSectorSelect() {
            const select = document.getElementById('sectorSelect');
            if (select) {
                select.innerHTML = '<option value="">Select a Sector</option>';
                Object.entries(appData.admin.sectors).forEach(([key, value]) => {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = value.name;
                    select.appendChild(option);
                });
            }
        }

        window.addBrandToSector = function() {
            const sector = document.getElementById("sectorSelect")?.value;
            const brand = document.getElementById("brandInput")?.value.trim();
            const subnodesInput = document.getElementById("subnodesInput")?.value;
            const subnodes = subnodesInput ? subnodesInput.split(",").map(n => n.trim()).filter(Boolean) : [];

            if (!sector || !brand || subnodes.length === 0) {
                adminStatusDiv.innerHTML = "<span class='text-red-500'>âš ï¸ Please select a sector, fill in the brand name, and at least one subnode.</span>";
                return;
            }

            if (!appData.admin.sectors[sector]) {
                appData.admin.sectors[sector] = { name: appData.fruitful.sectorList[sector] || sector, brands: [], nodes: [] };
            }

            if (!appData.admin.sectors[sector].brands.includes(brand)) {
                appData.admin.sectors[sector].brands.push(brand);
            }
            subnodes.forEach(node => {
                if (!appData.admin.sectors[sector].nodes.includes(node)) {
                    appData.admin.sectors[sector].nodes.push(node);
                }
            });

            adminStatusDiv.innerHTML = `<span class='text-green-500'>âœ… Added <strong>${brand}</strong> to <strong>${appData.admin.sectors[sector].name}</strong> (${subnodes.length} nodes).</span>`;

            loadBrandDashboard(appData.admin.sectors);
            console.log("ðŸ’¾ Updated Admin Data:", appData.admin.sectors);

            document.getElementById("brandInput").value = "";
            document.getElementById("subnodesInput").value = "";
        }

        function loadBrandDashboard(data) {
            const dashboard = document.getElementById("brandDashboard");
            if (!dashboard) return;
            dashboard.innerHTML = '';

            Object.entries(data).forEach(([key, val]) => {
                const label = val.name;

                const section = document.createElement("section");
                section.className = "mb-8 bg-white p-6 rounded-lg shadow-sm";
                section.innerHTML = `
                    <h3 class="text-md font-semibold mb-2">${label}</h3>
                    <div id="${key}-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-3 px-0"></div>
                    <div class="mt-4" id="${key}-snapshots"></div>
                `;
                dashboard.appendChild(section);

                const grid = section.querySelector(`#${key}-grid`);
                (val.brands || []).forEach(brandName => {
                    const tag = document.createElement("div");
                    tag.className = "bg-fcfcfc text-1d1d1f px-3 py-1 rounded text-sm text-center shadow cursor-pointer hover:bg-e8e8ed transition-colors border border-e8e8ed";
                    tag.textContent = brandName;
                    tag.onclick = () => showSmartSnapshot(key, brandName, val.nodes || []);
                    grid.appendChild(tag);
                });
            });
        }

        window.showSmartSnapshot = function(sectorKey, brandName, nodes) {
            document.querySelectorAll('.admin-main-content .snapshot-box').forEach(box => box.remove());

            const container = document.getElementById(`${sectorKey}-snapshots`);
            if (!container) return;

            const box = document.createElement("div");
            box.className = "snapshot-box";
            box.innerHTML = `
                <h4 class="text-lg font-bold mb-2">${brandName}â„¢ Snapshot</h4>
                <ul class="list-disc pl-6 space-y-1 text-sm">
                    ${nodes.map(node => `<li>${node}</li>`).join('')}
                </ul>
            `;
            container.appendChild(box);
        }

        function setupTechStackInteraction() {
            const techPillars = document.querySelectorAll('.tech-pillar');
            const techContentContainer = document.getElementById('tech-stack-content');

            techPillars.forEach(pillar => {
                pillar.addEventListener('click', (e) => {
                    const contentKey = e.currentTarget.dataset.content;
                    const contentData = appData.admin.techStack[contentKey];
                    if (contentData) {
                        techContentContainer.innerHTML = `
                            <div class="flex items-start gap-4">
                                <span class="text-3xl">${contentData.icon}</span>
                                <div>
                                    <h3 class="font-bold text-lg text-slate-800">${contentData.title}</h3>
                                    <p class="mt-2 text-slate-600">${contentData.details}</p>
                                    <ul class="mt-4 list-disc list-inside text-sm text-slate-500 space-y-1">
                                        ${contentData.features.map(f => `<li>${f}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        `;
                    } else {
                        techContentContainer.innerHTML = `<p class="text-center text-slate-500">Details not available for this pillar.</p>`;
                    }
                });
            });
        }

        function populateEcosystemSectorFilter() {
            const sectorFilter = document.getElementById('sector-filter');
            if (sectorFilter) {
                sectorFilter.innerHTML = '';
                Object.keys(appData.admin.sectors).forEach(key => {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = appData.admin.sectors[key].name;
                    sectorFilter.appendChild(option);
                });
                sectorFilter.addEventListener('change', (e) => {
                    displayEcosystemSectorInfo(e.target.value);
                });
            }
        }

        function displayEcosystemSectorInfo(sectorKey) {
            const explorerContent = document.getElementById('explorer-content');
            const sector = appData.admin.sectors[sectorKey];
            if (!explorerContent || !sector) return;

            explorerContent.innerHTML = `
                <div class="dashboard-metric-card">
                    <h3 class="dashboard-header-h2">${sector.name}</h3>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-slate-600">Core Brands</h4>
                            <ul class="mt-2 list-disc list-inside text-slate-500">
                                ${sector.brands.map(b => `<li>${b}â„¢</li>`).join('')}
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-slate-600">Node Count</h4>
                            <p class="text-3xl font-bold text-slate-700 mt-1">${sector.nodes.length}</p>
                            <p class="text-sm text-slate-500">active product nodes</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateSovereignScrollsProgressBar() {
            const progressBar = document.getElementById('progress-bar');
            const pagesGeneratedSpan = document.getElementById('pages-generated');
            const pagesTotalSpan = document.getElementById('pages-total');

            if (!progressBar || !pagesGeneratedSpan || !pagesTotalSpan) return;

            const generated = appData.admin.sovereignScrolls.generated;
            const total = appData.admin.sovereignScrolls.total;
            const progress = (generated / total) * 100;

            progressBar.style.width = `${progress.toFixed(1)}%`;
            progressBar.textContent = `${progress.toFixed(1)}%`;
            pagesGeneratedSpan.textContent = `${generated.toLocaleString()} Generated`;
            pagesTotalSpan.textContent = `${total.toLocaleString()} Total`;
        }

        // --- Hamburger menu toggle for mobile ---
        document.addEventListener('DOMContentLoaded', () => {
            const mainNav = document.querySelector('.main-nav');
            const hamburgerMenu = document.querySelector('.hamburger-menu');

            if (hamburgerMenu && mainNav) {
                hamburgerMenu.addEventListener('click', () => {
                    mainNav.classList.toggle('active');
                });
            }

            // Close mobile nav on link click
            document.querySelectorAll('.main-nav .nav-list a').forEach(link => {
                link.addEventListener('click', () => {
                    if (mainNav.classList.contains('active')) {
                        mainNav.classList.remove('active');
                    }
                });
            });
        });

        // --- VaultMesh Status Snapshot Feature ---
        function generateVaultMeshStatusSnapshot() {
            const snapshotOutputDiv = document.getElementById('vaultMeshSnapshotOutput');
            if (!snapshotOutputDiv) return;

            const metrics = appData.admin.globalMetrics;

            const snapshotContent = `
                <p class="font-semibold text-primary-color dark:text-primary-color mb-2">VaultMesh Live Status Snapshot (${new Date().toLocaleString()})</p>
                <ul class="list-disc pl-4 space-y-1">
                    <li>Total Brands Monitored: <strong class="text-text-color-light">${metrics.totalBrands.toLocaleString()}</strong></li>
                    <li>Active Vaults Connected: <strong class="text-text-color-light">${metrics.activeVaults}</strong></li>
                    <li>Total Scroll Claims: <strong class="text-text-color-light">${metrics.totalScrollClaims.toLocaleString()}</strong></li>
                    <li>Network Health Index: <strong class="text-text-color-light">${metrics.networkHealth}%</strong></li>
                    <li>Sovereign Scrolls Generated: <strong class="text-text-color-light">${appData.admin.sovereignScrolls.generated.toLocaleString()} / ${appData.admin.sovereignScrolls.total.toLocaleString()}</strong></li>
                    <li>Next Audit Cycle: <strong class="text-text-color-light">Automated, every 12 hours</strong></li>
                </ul>
                <p class="mt-3 italic text-muted-text-light text-xs">Data derived from PulseGridâ„¢ and OmniSignalâ„¢ layers.</p>
            `;

            snapshotOutputDiv.innerHTML = snapshotContent;
            snapshotOutputDiv.classList.remove('hidden');
        }

        // --- VaultMesh Index Snapshots (1-10) Feature ---
        function renderVaultMeshIndexSnapshots() {
            const container = document.getElementById('vaultMeshIndexContainer');
            if (!container) return;

            container.innerHTML = ''; // Clear previous snapshots

            vaultMeshSections.forEach((section, index) => {
                const snapshotCard = document.createElement('div');
                snapshotCard.className = 'vaultmesh-snapshot-card bg-card-bg-light dark:bg-card-bg-dark p-4 rounded-lg shadow-md border border-border-color-light dark:border-border-color-dark cursor-pointer transition-all duration-300 ease-in-out';
                snapshotCard.innerHTML = `
                    <div class="flex justify-between items-center">
                        <h4 class="font-semibold text-text-color-dark dark:text-text-color-light text-lg">${section.title}</h4>
                        <i class="fas fa-chevron-down text-muted-text-light dark:text-muted-text-light transition-transform duration-300"></i>
                    </div>
                    <div class="vaultmesh-snapshot-content mt-3 hidden text-muted-text-light dark:text-muted-text-light overflow-hidden transition-all duration-300 ease-in-out">
                        ${section.content}
                        <p class="mt-4 text-xs italic text-blue-500 dark:text-blue-400">
                            (API/Credential integration relevant for this section. Example: ${GEMINI_AI_API_KEY.substring(0, 10)}... (truncated for security))
                        </p>
                    </div>
                `;

                const chevronIcon = snapshotCard.querySelector('.fa-chevron-down');
                const contentDiv = snapshotCard.querySelector('.vaultmesh-snapshot-content');

                snapshotCard.addEventListener('click', () => {
                    const isOpen = contentDiv.classList.contains('active');
                    // Close all others and open this one, or just close this one
                    document.querySelectorAll('.vaultmesh-snapshot-content.active').forEach(openContent => {
                        if (openContent !== contentDiv) {
                            openContent.classList.remove('active');
                            openContent.classList.add('hidden');
                            openContent.style.maxHeight = '0px';
                            openContent.closest('.vaultmesh-snapshot-card').querySelector('.fa-chevron-down').classList.remove('rotate-180');
                        }
                    });

                    if (isOpen) {
                        contentDiv.classList.remove('active');
                        contentDiv.classList.add('hidden');
                        contentDiv.style.maxHeight = '0px';
                        chevronIcon.classList.remove('rotate-180');
                    } else {
                        contentDiv.classList.add('active');
                        contentDiv.classList.remove('hidden');
                        contentDiv.style.maxHeight = contentDiv.scrollHeight + 'px'; // Set max-height for smooth transition
                        chevronIcon.classList.add('rotate-180');
                    }
                });

                container.appendChild(snapshotCard);
            });
        }


        // --- Baobabe Day/Night Theme Toggle ---
        function setupThemeToggle() {
            const themeToggleBtn = document.getElementById('themeToggle');
            const lightIcon = themeToggleBtn.querySelector('[data-icon-light]');
            const darkIcon = themeToggleBtn.querySelector('[data-icon-dark]');

            // Check for saved theme preference or default to light
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                lightIcon.classList.add('hidden');
                darkIcon.classList.remove('hidden');
            } else {
                document.body.classList.remove('dark-mode');
                lightIcon.classList.remove('hidden');
                darkIcon.classList.add('hidden');
            }

            themeToggleBtn.addEventListener('click', () => {
                if (document.body.classList.contains('dark-mode')) {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light');
                    lightIcon.classList.remove('hidden');
                    darkIcon.classList.add('hidden');
                } else {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('theme', 'dark');
                    lightIcon.classList.add('hidden');
                    darkIcon.classList.remove('hidden');
                }
            });
        }

        // --- Secure Language Selection ---
        function setupLanguageSelector() {
            const langToggleBtn = document.getElementById('langToggle');
            const langDropdown = document.getElementById('langDropdown');
            const currentLangDisplay = document.getElementById('currentLangDisplay');

            // Set initial language from localStorage or default to English
            let currentLang = localStorage.getItem('language') || 'en';
            currentLangDisplay.textContent = currentLang.toUpperCase();

            // Toggle dropdown visibility
            langToggleBtn.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevent document click from closing immediately
                langDropdown.classList.toggle('hidden');
            });

            // Handle language selection
            langDropdown.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const selectedLang = event.target.dataset.lang;
                    if (selectedLang) {
                        currentLang = selectedLang;
                        localStorage.setItem('language', currentLang); // Securely store preference
                        currentLangDisplay.textContent = currentLang.toUpperCase();
                        langDropdown.classList.add('hidden');
                        console.log(`Language preference set to: ${currentLang}`);
                        // Optionally, trigger a UI update or API call for content in chosen language
                        const terminalOutput = document.getElementById('terminalOutput');
                        if(terminalOutput) {
                            const line = document.createElement('span');
                            line.style.color = '#81e6d9'; // Cyan
                            line.textContent = `Language preference set to: ${currentLang.toUpperCase()}.`;
                            terminalOutput.appendChild(line);
                            terminalOutput.appendChild(document.createElement('br'));
                            terminalOutput.scrollTop = terminalOutput.scrollHeight;
                        }
                    }
                });
            });

            // Close dropdown if clicked outside
            document.addEventListener('click', (event) => {
                if (!langToggleBtn.contains(event.target) && !langDropdown.contains(event.target)) {
                    langDropdown.classList.add('hidden');
                }
            });
        }


        // --- Baobabe Terminal Logic (Embedded) ---
        function initBaobabeTerminal() {
            const terminalOutput = document.getElementById('terminalOutput');
            const terminalInput = document.getElementById('terminalInput');

            // Function to append output to the terminal
            function appendToOutput(text, color = '#a0aec0') { // Default to light grey
                const line = document.createElement('span');
                line.style.color = color;
                line.textContent = text;
                terminalOutput.appendChild(line);
                terminalOutput.appendChild(document.createElement('br'));
                terminalOutput.scrollTop = terminalOutput.scrollHeight; // Auto-scroll to bottom
            }

            // Function to simulate an API call for command processing
            async function processCommand(command) {
                appendToOutput(`user@baobabe:~$ ${command}`, '#fff'); // Echo command in white

                const lowerCommand = command.toLowerCase().trim();

                if (lowerCommand === 'help') {
                    appendToOutput("Available commands:", '#81e6d9'); // Cyan
                    appendToOutput("  help - Display this help message.");
                    appendToOutput("  clear - Clear the terminal screen.");
                    appendToOutput("  echo [text] - Echo the provided text.");
                    appendToOutput("  about - Learn about Baobabe.");
                    appendToOutput("  date - Display the current date and time.");
                    appendToOutput("  generate âœ¨ [prompt] - Generate text using the Gemini API. (Example: 'generate a short story about a tree')");
                    appendToOutput("  summarize âœ¨ [text] - Summarize the provided text. (Example: 'summarize The quick brown fox jumps over the lazy dog.')");
                    appendToOutput("  idea-storm âœ¨ [topic] - Brainstorm ideas for a given topic. (Example: 'idea-storm new app features')");
                } else if (lowerCommand === 'clear') {
                    terminalOutput.innerHTML = '<span style="color: #48bb78;">Welcome to Baobabe Terminal!</span><br>Type \'help\' for a list of commands.<br><br>';
                    terminalOutput.scrollTop = terminalOutput.scrollHeight; // Auto-scroll to bottom
                } else if (lowerCommand.startsWith('echo ')) {
                    const textToEcho = command.substring(5);
                    appendToOutput(textToEcho, '#f6ad55'); // Orange
                } else if (lowerCommand === 'about') {
                    appendToOutput("Baobabe Terminal is a simulated command-line interface.", '#9f7aea'); // Purple
                    appendToOutput("It's built with HTML, CSS (TailwindCSS), and JavaScript.", '#9f7aea');
                    appendToOutput("It demonstrates basic terminal functionality and integrates with the Gemini API for text generation.", '#9f7aea');
                } else if (lowerCommand === 'date') {
                    const now = new Date();
                    appendToOutput(now.toLocaleString(), '#ed8936'); // Amber
                } else if (lowerCommand.startsWith('generate ')) {
                    const prompt = command.substring(9).trim();
                    if (prompt) {
                        appendToOutput("Generating response...", '#63b3ed'); // Blue
                        try {
                            let chatHistory = [];
                            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                            const payload = { contents: chatHistory };
                            const apiKey = GEMINI_AI_API_KEY; // Using the explicitly provided API key
                            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                            const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            const result = await response.json();

                            if (result.candidates && result.candidates.length > 0 &&
                                result.candidates[0].content && result.candidates[0].content.parts &&
                                result.candidates[0].content.parts.length > 0) {
                                const text = result.candidates[0].content.parts[0].text;
                                appendToOutput(`Response âœ¨:`, '#48bb78'); // Green for successful response header with sparkle
                                // Split the text by newlines and append each line
                                text.split('\n').forEach(line => appendToOutput(line));
                            } else {
                                appendToOutput("Error: Could not get a valid response from the API.", '#f56565'); // Red
                                console.error("API Response structure unexpected:", result);
                            }
                        } catch (error) {
                            appendToOutput(`Error during API call: ${error.message}`, '#f56565'); // Red
                            console.error("Fetch error:", error);
                        }
                    } else {
                        appendToOutput("Usage: generate âœ¨ [prompt]", '#f6e05e'); // Yellow
                    }
                } else if (lowerCommand.startsWith('summarize ')) {
                    const textToSummarize = command.substring(10).trim();
                    if (textToSummarize) {
                        appendToOutput("Summarizing...", '#63b3ed'); // Blue
                        try {
                            let chatHistory = [];
                            chatHistory.push({ role: "user", parts: [{ text: `Summarize the following text: ${textToSummarize}` }] });
                            const payload = { contents: chatHistory };
                            const apiKey = GEMINI_AI_API_KEY; // Using the explicitly provided API key
                            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                            const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            const result = await response.json();

                            if (result.candidates && result.candidates.length > 0 &&
                                result.candidates[0].content && result.candidates[0].content.parts &&
                                result.candidates[0].content.parts.length > 0) {
                                const summary = result.candidates[0].content.parts[0].text;
                                appendToOutput(`Summary âœ¨:`, '#48bb78');
                                summary.split('\n').forEach(line => appendToOutput(line));
                            } else {
                                appendToOutput("Error: Could not get a valid summary from the API.", '#f56565');
                                console.error("API Response structure unexpected:", result);
                            }
                        } catch (error) {
                            appendToOutput(`Error during API call: ${error.message}`, '#f56565');
                            console.error("Fetch error:", error);
                        }
                    } else {
                        appendToOutput("Usage: summarize âœ¨ [text]", '#f6e05e');
                    }
                } else if (lowerCommand.startsWith('idea-storm ')) {
                    const topic = command.substring(11).trim();
                    if (topic) {
                        appendToOutput(`Brainstorming ideas for '${topic}'...`, '#63b3ed'); // Blue
                        try {
                            let chatHistory = [];
                            chatHistory.push({ role: "user", parts: [{ text: `Brainstorm ideas for the following topic: ${topic}` }] });
                            const payload = { contents: chatHistory };
                            const apiKey = GEMINI_AI_API_KEY; // Using the explicitly provided API key
                            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                            const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            const result = await response.json();

                            if (result.candidates && result.candidates.length > 0 &&
                                result.candidates[0].content && result.candidates[0].content.parts &&
                                result.candidates[0].content.parts.length > 0) {
                                const ideas = result.candidates[0].content.parts[0].text;
                                appendToOutput(`Ideas for '${topic}' âœ¨:`, '#48bb78');
                                ideas.split('\n').forEach(line => appendToOutput(line));
                            } else {
                                appendToOutput("Error: Could not get ideas from the API.", '#f56565');
                                console.error("API Response structure unexpected:", result);
                            }
                        } catch (error) {
                            appendToOutput(`Error during API call: ${error.message}`, '#f56565');
                            console.error("Fetch error:", error);
                        }
                    } else {
                        appendToOutput("Usage: idea-storm âœ¨ [topic]", '#f6e05e');
                    }
                }
                else {
                    appendToOutput(`Command not found: '${command}'. Type 'help' for a list of commands.`, '#f56565'); // Red
                }
                appendToOutput(""); // Add an empty line for spacing
            }

            // Event listener for Enter key on the input field
            if (terminalInput) {
                terminalInput.addEventListener('keydown', function(event) {
                    if (event.key === 'Enter') {
                        const command = terminalInput.value.trim();
                        if (command) {
                            processCommand(command);
                        }
                        terminalInput.value = ''; // Clear input field
                    }
                });
                terminalInput.focus(); // Initial focus on the input field
            } else {
                console.error("Terminal input element not found!");
            }
        }
    </script>

</body>
</html>
